OBJECT Table 5624 FA Reclass. Journal Line
{
  OBJECT-PROPERTIES
  {
    Date=30.05.17;
    Time=17:57:11;
    Modified=Yes;
    Version List=NAVW19.00,NAVRU9.00,NOS-26;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               LOCKTABLE;
               FAReclassJnlTempl.GET("Journal Template Name");
               FAReclassJnlBatch.GET("Journal Template Name","Journal Batch Name");
             END;

    CaptionML=[ENU=FA Reclass. Journal Line;
               RUS=Строка журнала реклассиф. ОС];
  }
  FIELDS
  {
    { 1   ;   ;Journal Template Name;Code10       ;TableRelation="FA Reclass. Journal Template";
                                                   CaptionML=[ENU=Journal Template Name;
                                                              RUS=Имя шаблона журнала] }
    { 2   ;   ;Journal Batch Name  ;Code10        ;TableRelation="FA Reclass. Journal Batch".Name WHERE (Journal Template Name=FIELD(Journal Template Name));
                                                   CaptionML=[ENU=Journal Batch Name;
                                                              RUS=Код раздела журнала] }
    { 3   ;   ;Line No.            ;Integer       ;CaptionML=[ENU=Line No.;
                                                              RUS=Номер строки] }
    { 4   ;   ;FA No.              ;Code20        ;TableRelation="Fixed Asset";
                                                   OnValidate=BEGIN
                                                                IF "FA No." = '' THEN
                                                                  EXIT;
                                                                FA.GET("FA No.");
                                                                FA.TESTFIELD(Blocked,FALSE);
                                                                FA.TESTFIELD(Inactive,FALSE);
                                                                Description := FA.Description;
                                                                IF "Depreciation Book Code" = '' THEN BEGIN
                                                                  FASetup.GET;
                                                                  "Depreciation Book Code" := FASetup."Default Depr. Book";
                                                                END;

                                                                "FA Location Code" := FA."FA Location Code";
                                                                "Employee No." := FA."Responsible Employee";
                                                              END;

                                                   CaptionML=[ENU=FA No.;
                                                              RUS=Номер ОС] }
    { 5   ;   ;New FA No.          ;Code20        ;TableRelation="Fixed Asset";
                                                   OnValidate=BEGIN
                                                                IF "New FA No." = '' THEN
                                                                  EXIT;
                                                                FA.GET("New FA No.");
                                                                FA.TESTFIELD(Blocked,FALSE);
                                                                FA.TESTFIELD(Inactive,FALSE);
                                                              END;

                                                   CaptionML=[ENU=New FA No.;
                                                              RUS=Новый номер ОС] }
    { 6   ;   ;FA Posting Date     ;Date          ;CaptionML=[ENU=FA Posting Date;
                                                              RUS=Дата учета ОС] }
    { 7   ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              RUS=Дата учета] }
    { 8   ;   ;Depreciation Book Code;Code10      ;TableRelation="Depreciation Book";
                                                   CaptionML=[ENU=Depreciation Book Code;
                                                              RUS=Код книги амортизации] }
    { 9   ;   ;Reclassify Acq. Cost Amount;Decimal;OnValidate=BEGIN
                                                                "Reclassify Acq. Cost %" := 0;
                                                              END;

                                                   CaptionML=[ENU=Reclassify Acq. Cost Amount;
                                                              RUS=Реклассиф. суммы стоим. приобретения];
                                                   MinValue=0;
                                                   AutoFormatType=1 }
    { 10  ;   ;Reclassify Acq. Cost %;Decimal     ;OnValidate=BEGIN
                                                                "Reclassify Acq. Cost Amount" := 0;
                                                              END;

                                                   CaptionML=[ENU=Reclassify Acq. Cost %;
                                                              RUS=Реклассиф. стоим. приобретения (%)];
                                                   DecimalPlaces=0:8;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 11  ;   ;Reclassify Acquisition Cost;Boolean;CaptionML=[ENU=Reclassify Acquisition Cost;
                                                              RUS=Реклассиф. стоимости приобретения] }
    { 12  ;   ;Reclassify Depreciation;Boolean    ;CaptionML=[ENU=Reclassify Depreciation;
                                                              RUS=Реклассиф. амортизации] }
    { 13  ;   ;Reclassify Write-Down;Boolean      ;CaptionML=[ENU=Reclassify Write-Down;
                                                              RUS=Реклассиф. понижения стоимости] }
    { 14  ;   ;Reclassify Appreciation;Boolean    ;CaptionML=[ENU=Reclassify Appreciation;
                                                              RUS=Реклассиф. повышения стоимости] }
    { 15  ;   ;Reclassify Custom 1 ;Boolean       ;CaptionML=[ENU=Reclassify Custom 1;
                                                              RUS=Реклассиф. - польз. метод 1] }
    { 16  ;   ;Reclassify Custom 2 ;Boolean       ;CaptionML=[ENU=Reclassify Custom 2;
                                                              RUS=Реклассиф. - польз. метод 2] }
    { 17  ;   ;Reclassify Salvage Value;Boolean   ;CaptionML=[ENU=Reclassify Salvage Value;
                                                              RUS=Реклассиф. ликвид. стоимости] }
    { 18  ;   ;Insert Bal. Account ;Boolean       ;CaptionML=[ENU=Insert Bal. Account;
                                                              RUS=Вставить баланс. счет] }
    { 19  ;   ;Description         ;Text50        ;CaptionML=[ENU=Description;
                                                              RUS=Описание] }
    { 20  ;   ;Document No.        ;Code20        ;CaptionML=[ENU=Document No.;
                                                              RUS=Номер документа] }
    { 22  ;   ;Calc. DB1 Depr. Amount;Boolean     ;CaptionML=[ENU=Calc. DB1 Depr. Amount;
                                                              RUS=Расчет амортизации методом DB1] }
    { 12400;  ;FA Location Code    ;Code10        ;TableRelation="FA Location";
                                                   CaptionML=[ENU=FA Location Code;
                                                              RUS=Код местонахождения ОС] }
    { 12402;  ;New Depreciation Book Code;Code10  ;TableRelation="Depreciation Book";
                                                   CaptionML=[ENU=New Depreciation Book Code;
                                                              RUS=Новый код книги амортизации] }
    { 12410;  ;Employee No.        ;Code20        ;TableRelation=Employee;
                                                   CaptionML=[ENU=Employee No.;
                                                              RUS=Код сотрудника] }
    { 12412;  ;FA Posting Group    ;Code10        ;TableRelation="FA Posting Group";
                                                   CaptionML=[ENU=FA Posting Group;
                                                              RUS=Учетная группа ОС] }
    { 12413;  ;New FA Posting Group;Code10        ;TableRelation="FA Posting Group";
                                                   OnValidate=VAR
                                                                FADeprBook@1210000 : Record 5612;
                                                              BEGIN
                                                              END;

                                                   CaptionML=[ENU=New FA Posting Group;
                                                              RUS=Новая учетная группа ОС] }
    { 12414;  ;Duplicate to Journal;Boolean       ;CaptionML=[ENU=Duplicate to Journal;
                                                              RUS=Дублировать в журнале] }
    { 12415;  ;Copy to Depreciation Book Code;Code20;
                                                   CaptionML=[ENU=Copy to Depreciation Book Code;
                                                              RUS=Копировать в код книги амортизации] }
    { 12416;  ;Quantity            ;Integer       ;OnValidate=VAR
                                                                FADeprBook@1210000 : Record 5612;
                                                              BEGIN
                                                                FA.GET("FA No.");
                                                                IF FA."Undepreciable FA" THEN BEGIN
                                                                  FADeprBook.GET("FA No.","Depreciation Book Code");
                                                                  FADeprBook.CALCFIELDS(Quantity);
                                                                  IF Quantity > FADeprBook.Quantity THEN
                                                                    TESTFIELD(Quantity,FADeprBook.Quantity);
                                                                  IF FADeprBook.Quantity > 0 THEN
                                                                    "Reclassify Acq. Cost %" := Quantity / FADeprBook.Quantity * 100;
                                                                END ELSE BEGIN
                                                                  Quantity := 1;
                                                                  "Reclassify Acq. Cost %" := 100;
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Quantity;
                                                              RUS=Кол-во] }
    { 50001;  ;Buffer Entry No.    ;Integer       ;CaptionML=RUS=Буфер Операция Но.;
                                                   Description=NC PIF001 }
    { 50002;  ;Cons. Source Code   ;Code20        ;CaptionML=[ENU=Cons. Source Code;
                                                              RUS=Код Источника Консолидации];
                                                   Description=NC PIF001 }
    { 50003;  ;FA Dimension Code   ;Code20        ;TableRelation=Dimension.Code;
                                                   CaptionML=[ENU=FA Dimension Code;
                                                              RUS=ОС Измерение Код];
                                                   Description=NC MFA16 }
    { 50004;  ;FA Dimension Value Code;Code20     ;TableRelation="Dimension Value".Code WHERE (Dimension Code=FIELD(FA Dimension Code));
                                                   CaptionML=[ENU=FA Dimension Value Code;
                                                              RUS=ОС Измерение Значение Код];
                                                   Description=NC MFA16 }
    { 50005;  ;New FA Dimension Value Code;Code20 ;TableRelation="Dimension Value".Code WHERE (Dimension Code=FIELD(FA Dimension Code));
                                                   CaptionML=[ENU=New FA Dimension Value Code;
                                                              RUS=Новый ОС Измерение Значение Код];
                                                   Description=NC MFA16 }
    { 50007;  ;Source FA Entry No. ;Integer       ;CaptionML=[ENU=Source FA Entry No.;
                                                              RUS=Источник ОС Операция Но.];
                                                   Description=NC MIO-9 DP }
  }
  KEYS
  {
    {    ;Journal Template Name,Journal Batch Name,Line No.;
                                                   Clustered=Yes }
    {    ;Journal Template Name,Journal Batch Name,FA Posting Date }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      FA@1000 : Record 5600;
      FASetup@1001 : Record 5603;
      FAReclassJnlTempl@1002 : Record 5622;
      FAReclassJnlBatch@1003 : Record 5623;
      DimMgt@1210000 : Codeunit 408;

    PROCEDURE SetUpNewLine@5(LastFAReclassJnlLine@1000 : Record 5624);
    BEGIN
      "FA Posting Date" := LastFAReclassJnlLine."FA Posting Date";
    END;

    PROCEDURE IsOpenedFromBatch@42() : Boolean;
    VAR
      FAReclassJournalBatch@1002 : Record 5623;
      TemplateFilter@1001 : Text;
      BatchFilter@1000 : Text;
    BEGIN
      BatchFilter := GETFILTER("Journal Batch Name");
      IF BatchFilter <> '' THEN BEGIN
        TemplateFilter := GETFILTER("Journal Template Name");
        IF TemplateFilter <> '' THEN
          FAReclassJournalBatch.SETFILTER("Journal Template Name",TemplateFilter);
        FAReclassJournalBatch.SETFILTER(Name,BatchFilter);
        FAReclassJournalBatch.FINDFIRST;
      END;

      EXIT((("Journal Batch Name" <> '') AND ("Journal Template Name" = '')) OR (BatchFilter <> ''));
    END;

    BEGIN
    {
      NC PIF001 DL Добавлены поля Buffer Entry No., Cons. Source Code
      NC MFA16 DP Перемещение между значениями аналитики
      NC MIO-9 DP Добавлено поле "Source FA Entry No."
    }
    END.
  }
}

