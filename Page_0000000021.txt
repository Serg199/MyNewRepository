OBJECT Page 21 Customer Card
{
  OBJECT-PROPERTIES
  {
    Date=11.07.17;
    Time=14:12:07;
    Modified=Yes;
    Version List=NAVW110.00.00.15601,NAVRU10.00.00.15601,NOS-26;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Customer Card;
               RUS=Карточка клиента];
    SourceTable=Table18;
    PageType=Card;
    RefreshOnActivate=Yes;
    PromotedActionCategoriesML=[ENU=New,Process,Report,New Document,Approve,Request Approval,Prices and Discounts,Navigate,Customer;
                                RUS=Создать,Обработать,Отчет,Создать документ,Утвердить,Запросить утверждение,Цены и скидки,Навигатор,Клиент];
    OnInit=VAR
             ApplicationAreaSetup@1000 : Record 9178;
           BEGIN
             FoundationOnly := ApplicationAreaSetup.IsFoundationEnabled;

             SetCustomerNoVisibilityOnFactBoxes;

             ContactEditable := TRUE;
             TotalBalanceVisible := TRUE;
             VendorBalanceVisible := TRUE;
             VendorNameVisible := TRUE;

             OpenApprovalEntriesExistCurrUser := TRUE;
           END;

    OnOpenPage=VAR
                 CRMIntegrationManagement@1001 : Codeunit 5330;
                 OfficeManagement@1002 : Codeunit 1630;
               BEGIN
                 ActivateFields;

                 CRMIntegrationEnabled := CRMIntegrationManagement.IsCRMIntegrationEnabled;
                 SetNoFieldVisible;
                 IsOfficeAddin := OfficeManagement.IsAvailable;

                 CurrPage.PriceAndLineDisc.PAGE.InitPage(FALSE);

                 ShowCharts := "No." <> '';
                 IF ShowCharts THEN BEGIN
                   CurrPage.AgedAccReceivableChart.PAGE.SetPerCustomer;
                   CurrPage.AgedAccReceivableChart2.PAGE.SetPerCustomer;
                 END;
                 SETFILTER("Date Filter",CustomerMgt.GetCurrentYearFilter);

                 // NC NOS-26 SPA Кастомизация перенесена в CU 50085 в функцию-подписчик на событие
               END;

    OnAfterGetRecord=VAR
                       AgedAccReceivable@1000 : Codeunit 763;
                     BEGIN
                       ActivateFields;
                       StyleTxt := SetStyle;
                       BlockedCustomer := (Blocked = Blocked::All);
                       BalanceExhausted := 10000 <= CalcCreditLimitLCYExpendedPct;
                       DaysPastDueDate := AgedAccReceivable.InvoicePaymentDaysAverage("No.");
                       AttentionToPaidDay := DaysPastDueDate > 0;
                     END;

    OnNewRecord=VAR
                  DocumentNoVisibility@1004 : Codeunit 1400;
                BEGIN
                  IF GUIALLOWED THEN
                    IF "No." = '' THEN
                      IF DocumentNoVisibility.CustomerNoSeriesIsDefault THEN
                        NewMode := TRUE;
                END;

    OnAfterGetCurrRecord=VAR
                           CRMCouplingManagement@1001 : Codeunit 5331;
                           WorkflowManagement@1000 : Codeunit 1501;
                           WorkflowEventHandling@1003 : Codeunit 1520;
                         BEGIN
                           CreateCustomerFromTemplate;
                           ActivateFields;
                           StyleTxt := SetStyle;
                           ShowWorkflowStatus := CurrPage.WorkflowStatus.PAGE.SetFilterOnWorkflowRecord(RECORDID);
                           CRMIsCoupledToRecord := CRMIntegrationEnabled AND CRMCouplingManagement.IsRecordCoupledToCRM(RECORDID);
                           OpenApprovalEntriesExistCurrUser := ApprovalsMgmt.HasOpenApprovalEntriesForCurrentUser(RECORDID);
                           OpenApprovalEntriesExist := ApprovalsMgmt.HasOpenApprovalEntries(RECORDID);
                           GetSalesPricesAndSalesLineDisc;
                           DynamicEditable := CurrPage.EDITABLE;

                           CanCancelApprovalForRecord := ApprovalsMgmt.CanCancelApprovalForRecord(RECORDID);

                           EventFilter := WorkflowEventHandling.RunWorkflowOnSendCustomerForApprovalCode + '|' +
                             WorkflowEventHandling.RunWorkflowOnCustomerChangedCode;

                           EnabledApprovalWorkflowsExist := WorkflowManagement.EnabledWorkflowExist(DATABASE::Customer,EventFilter);
                         END;

    ActionList=ACTIONS
    {
      { 1900000003;0 ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 74      ;1   ;ActionGroup;
                      CaptionML=[ENU=&Customer;
                                 RUS=&Клиент];
                      Image=Customer }
      { 84      ;2   ;Action    ;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 RUS=Измерения];
                      ToolTipML=[ENU=View or edits dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 RUS=Просмотр или изменение измерений, например области, проекта или отдела, которые можно назначать документам покупки и продажи для распределения себестоимости и анализа истории транзакций.];
                      ApplicationArea=#Suite;
                      RunObject=Page 540;
                      RunPageLink=Table ID=CONST(18),
                                  No.=FIELD(No.);
                      Image=Dimensions }
      { 99      ;2   ;Action    ;
                      CaptionML=[ENU=Bank Accounts;
                                 RUS=Банковские счета];
                      ToolTipML=[ENU=View or set up the customer's bank accounts. You can set up any number of bank accounts for each customer.;
                                 RUS=Просмотр или настройка банковских счетов клиентов. Для каждого из клиентов можно настроить любой номер банковского счета.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 424;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=BankAccount;
                      PromotedCategory=Category9;
                      PromotedOnly=Yes }
      { 19      ;2   ;Action    ;
                      CaptionML=[ENU=Direct Debit Mandates;
                                 RUS=Поручения на прямое дебетование];
                      ToolTipML=[ENU=View the direct-debit mandates that reflect agreements with customers to collect invoice payments from their bank account.;
                                 RUS=Просмотр поручений прямого дебетования, отражающих соглашения с клиентами по списанию платежей по счетам с их банковских счетов.];
                      RunObject=Page 1230;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=MakeAgreement;
                      PromotedCategory=Category9;
                      PromotedOnly=Yes }
      { 81      ;2   ;Action    ;
                      Name=ShipToAddresses;
                      CaptionML=[ENU=Ship-&to Addresses;
                                 RUS=Ад&реса получателей];
                      ToolTipML=[ENU=View or edit alternate shipping addresses where the customer wants items delivered if different from the regular address.;
                                 RUS=Просмотр или изменение альтернативных адресов отгрузки, по которым клиенту требуется доставить товары, если эти адреса отличаются от обычного адреса клиента.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 301;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=ShipAddress;
                      PromotedCategory=Category9;
                      PromotedOnly=Yes }
      { 1470019 ;2   ;Action    ;
                      CaptionML=[ENU=Agreements;
                                 RUS=Договоры];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 14900;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Agreement;
                      PromotedCategory=Process }
      { 14      ;2   ;Action    ;
                      Name=Contact;
                      AccessByPermission=TableData 5050=R;
                      CaptionML=[ENU=C&ontact;
                                 RUS=К&онтакт];
                      ToolTipML=[ENU=View or edit detailed information about the contact person at the customer.;
                                 RUS=Просмотр или изменение подробных сведений о контактном лице клиента.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=ContactPerson;
                      PromotedCategory=Category9;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 ShowContact;
                               END;
                                }
      { 94      ;2   ;Action    ;
                      CaptionML=[ENU=Cross Re&ferences;
                                 RUS=Перекрестные ссы&лки];
                      ToolTipML=[ENU=Set up the customer's own identification of items that you sell to the customer. Cross-references to the customer's item number means that the item number is automatically shown on sales documents instead of the number that you use.;
                                 RUS=Настройка клиентских обозначений товаров, которые вы продаете клиенту. Перекрестные ссылки на клиентский номенклатурный номер означают, что в документах продажи автоматически используется клиентский номенклатурный номер, а не используемый вами номер.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 5723;
                      RunPageView=SORTING(Cross-Reference Type,Cross-Reference Type No.);
                      RunPageLink=Cross-Reference Type=CONST(Customer),
                                  Cross-Reference Type No.=FIELD(No.);
                      Image=Change }
      { 78      ;2   ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 RUS=Ко&мментарии];
                      RunObject=Page 124;
                      RunPageLink=Table Name=CONST(Customer),
                                  No.=FIELD(No.);
                      Image=ViewComments }
      { 59      ;2   ;Action    ;
                      Name=ApprovalEntries;
                      AccessByPermission=TableData 454=R;
                      CaptionML=[ENU=Approvals;
                                 RUS=Утверждения];
                      ToolTipML=[ENU=View a list of the records that are waiting to be approved. For example, you can see who requested the record to be approved, when it was sent, and when it is due to be approved.;
                                 RUS=Просмотр списка записей, ожидающих утверждения. Например, вы можете видеть имя пользователя, запросившего утверждение записи, время отправки запроса и время, когда он должен быть утвержден.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Image=Approvals;
                      PromotedCategory=Category6;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 ApprovalsMgmt.OpenApprovalEntriesPage(RECORDID);
                               END;
                                }
      { 243     ;2   ;Action    ;
                      Name=CustomerReportSelections;
                      CaptionML=[ENU=Document Layouts;
                                 RUS=Макеты документа];
                      ToolTipML=[ENU=Set up a layout for different types of documents such as invoices, quotes, and credit memos.;
                                 RUS=Настройка макета для различных типов документов, например для счетов, предложений и кредит-нот.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Quote;
                      OnAction=VAR
                                 CustomReportSelection@1000 : Record 9657;
                               BEGIN
                                 CustomReportSelection.SETRANGE("Source Type",DATABASE::Customer);
                                 CustomReportSelection.SETRANGE("Source No.","No.");
                                 PAGE.RUNMODAL(PAGE::"Customer Report Selections",CustomReportSelection);
                               END;
                                }
      { 1101495019;2 ;Action    ;
                      CaptionML=[ENU=Create vendor;
                                 RUS=Создать поставщика];
                      Image=VendorCode;
                      OnAction=VAR
                                 CopyVendorfromCustomer@1101495000 : Report 50078;
                               BEGIN
                                 //NC MTD002 > AIG
                                 CopyVendorfromCustomer.SetParam(Rec."No.");
                                 CopyVendorfromCustomer.RUN;
                                 //NC MTD002 < AIG
                               END;
                                }
      { 1101495021;2 ;Separator  }
      { 1101495020;2 ;Action    ;
                      CaptionML=[ENU=Customer credit rating;
                                 RUS=Кредитный рейтинг клиента];
                      RunObject=Page 50078;
                      RunPageLink=No.=FIELD(No.);
                      Image=CustomerRating }
      { 1101495022;2 ;Action    ;
                      CaptionML=[ENU=Fields mapping;
                                 RUS=Соответствие полей];
                      Image=Table;
                      OnAction=VAR
                                 ComFieldsSetupForm@1101495000 : Page 50038;
                               BEGIN
                                 //NC MDB05 > GM
                                 ComFieldsSetupForm.SetNewRecord(DATABASE::"Buffer Customer", DATABASE::Customer);
                                 ComFieldsSetupForm.RUN;
                                 //NC MDB05 < GM
                               END;
                                }
      { 1101495023;2 ;Separator  }
      { 1101495024;2 ;Action    ;
                      CaptionML=[ENU=Change block status;
                                 RUS=Изменить статус блокировки];
                      Image=Change;
                      OnAction=VAR
                                 ChangeBlockCounterpartyForm@1101495000 : Page 50161;
                               BEGIN
                                 //NC TR225 > DP
                                 CLEAR(ChangeBlockCounterpartyForm);
                                 ChangeBlockCounterpartyForm.SetCounterparty(18,"No.");
                                 ChangeBlockCounterpartyForm.RUNMODAL;
                                 //NC TR225 < DP
                               END;
                                }
      { 1101495025;2 ;Action    ;
                      CaptionML=[ENU=Change block Log;
                                 RUS=История изменений блокировки];
                      RunObject=Page 50162;
                      RunPageLink=Source Table ID=CONST(18),
                                  Source No.=FIELD(No.);
                      Image=Log }
      { 1101495026;2 ;Separator  }
      { 1101495027;2 ;Action    ;
                      CaptionML=[ENU=Document templates;
                                 RUS=Шаблоны документов];
                      Image=Template;
                      OnAction=VAR
                                 ReportTemplateExWrd@1101495001 : Record 50026;
                                 ReportTemplate@1101495000 : Page 50203;
                               BEGIN
                                 //NC TR092.1 > DP
                                 CLEAR(ReportTemplate);
                                 ReportTemplateExWrd.RESET;
                                 ReportTemplateExWrd.SETRANGE("Source Type",ReportTemplateExWrd."Source Type"::Customer);
                                 ReportTemplateExWrd.SETRANGE("Source No.","No.");
                                 ReportTemplateExWrd.SETRANGE("Agreement No.",'');
                                 ReportTemplate.SETTABLEVIEW(ReportTemplateExWrd);
                                 ReportTemplate.SetVisable(1);
                                 ReportTemplate.RUN;
                                 //NC TR092.1 < DP
                               END;
                                }
      { 31      ;1   ;ActionGroup;
                      Name=ActionGroupCRM;
                      CaptionML=[ENU=Dynamics CRM;
                                 RUS=Dynamics CRM];
                      Visible=CRMIntegrationEnabled }
      { 33      ;2   ;Action    ;
                      Name=CRMGotoAccount;
                      CaptionML=[ENU=Account;
                                 RUS=Организация];
                      ToolTipML=[ENU=Open the coupled Microsoft Dynamics CRM account.;
                                 RUS=Открытие связанной организации Microsoft Dynamics CRM.];
                      ApplicationArea=#All;
                      Image=CoupledCustomer;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.ShowCRMEntityFromRecordID(RECORDID);
                               END;
                                }
      { 53      ;2   ;Action    ;
                      Name=CRMSynchronizeNow;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Synchronize Now;
                                 RUS=Синхронизировать сейчас];
                      ToolTipML=[ENU=Send or get updated data to or from Microsoft Dynamics CRM.;
                                 RUS=Отправка данных в Microsoft Dynamics CRM или получение обновленных данных.];
                      ApplicationArea=#All;
                      Image=Refresh;
                      OnAction=VAR
                                 CRMIntegrationManagement@1001 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.UpdateOneNow(RECORDID);
                               END;
                                }
      { 43      ;2   ;Action    ;
                      Name=UpdateStatisticsInCRM;
                      CaptionML=[ENU=Update Account Statistics;
                                 RUS=Обновить статистику счета];
                      ToolTipML=[ENU=Send customer statistics data to Dynamics CRM to update the Account Statistics FactBox.;
                                 RUS=Отправка данных статистики клиента в Dynamics CRM для обновления информационной панели статистики счета.];
                      ApplicationArea=#All;
                      Enabled=CRMIsCoupledToRecord;
                      Image=UpdateXML;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.CreateOrUpdateCRMAccountStatistics(Rec);
                               END;
                                }
      { 51      ;2   ;ActionGroup;
                      Name=Coupling;
                      CaptionML=[@@@=Coupling is a noun;
                                 ENU=Coupling;
                                 RUS=Связывание];
                      ToolTipML=[ENU=Create, change, or delete a coupling between the Microsoft Dynamics NAV record and a Microsoft Dynamics CRM record.;
                                 RUS=Создание, изменение или удаление связи между записью Microsoft Dynamics NAV и записью Microsoft Dynamics CRM.];
                      Image=LinkAccount }
      { 47      ;3   ;Action    ;
                      Name=ManageCRMCoupling;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Set Up Coupling;
                                 RUS=Настроить связывание];
                      ToolTipML=[ENU=Create or modify the coupling to a Microsoft Dynamics CRM account.;
                                 RUS=Создание или изменение связи с организацией Microsoft Dynamics CRM.];
                      ApplicationArea=#All;
                      Image=LinkAccount;
                      OnAction=VAR
                                 CRMIntegrationManagement@1000 : Codeunit 5330;
                               BEGIN
                                 CRMIntegrationManagement.DefineCoupling(RECORDID);
                               END;
                                }
      { 49      ;3   ;Action    ;
                      Name=DeleteCRMCoupling;
                      AccessByPermission=TableData 5331=IM;
                      CaptionML=[ENU=Delete Coupling;
                                 RUS=Удалить связывание];
                      ToolTipML=[ENU=Delete the coupling to a Microsoft Dynamics CRM account.;
                                 RUS=Удаление связи с организацией Microsoft Dynamics CRM.];
                      ApplicationArea=#All;
                      Enabled=CRMIsCoupledToRecord;
                      Image=UnLinkAccount;
                      OnAction=VAR
                                 CRMCouplingManagement@1000 : Codeunit 5331;
                               BEGIN
                                 CRMCouplingManagement.RemoveCoupling(RECORDID);
                               END;
                                }
      { 5       ;1   ;ActionGroup;
                      CaptionML=[ENU=History;
                                 RUS=История];
                      Image=History }
      { 80      ;2   ;Action    ;
                      ShortCutKey=Ctrl+F7;
                      CaptionML=[ENU=Ledger E&ntries;
                                 RUS=&Книга операций];
                      ToolTipML=[ENU=View the history of transactions that have been posted for the selected record.;
                                 RUS=Просмотр истории транзакций, которые были учтены для выбранной записи.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 25;
                      RunPageView=SORTING(Customer No.)
                                  ORDER(Descending);
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=CustomerLedger;
                      PromotedCategory=Process }
      { 76      ;2   ;Action    ;
                      ShortCutKey=F7;
                      CaptionML=[ENU=Statistics;
                                 RUS=Статистика];
                      RunObject=Page 151;
                      RunPageLink=No.=FIELD(No.),
                                  Date Filter=FIELD(Date Filter),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                      Image=Statistics;
                      PromotedCategory=Process }
      { 79      ;2   ;Action    ;
                      CaptionML=[ENU=S&ales;
                                 RUS=Про&дажи];
                      RunObject=Page 155;
                      RunPageLink=No.=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                      Image=Sales }
      { 77      ;2   ;Action    ;
                      CaptionML=[ENU=Entry Statistics;
                                 RUS=Статистика операций];
                      RunObject=Page 302;
                      RunPageLink=No.=FIELD(No.),
                                  Date Filter=FIELD(Date Filter),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                      Image=EntryStatistics }
      { 112     ;2   ;Action    ;
                      CaptionML=[ENU=Statistics by C&urrencies;
                                 RUS=Статистика по в&алютам];
                      RunObject=Page 486;
                      RunPageLink=Customer Filter=FIELD(No.),
                                  Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                                  Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter),
                                  Date Filter=FIELD(Date Filter);
                      Image=Currencies }
      { 6500    ;2   ;Action    ;
                      CaptionML=[ENU=Item &Tracking Entries;
                                 RUS=Операции трассир&овки товара];
                      Image=ItemTrackingLedger;
                      OnAction=VAR
                                 ItemTrackingDocMgt@1000 : Codeunit 6503;
                               BEGIN
                                 ItemTrackingDocMgt.ShowItemTrackingForMasterData(1,"No.",'','','','','','');
                               END;
                                }
      { 140     ;2   ;Separator  }
      { 1470016 ;2   ;Separator  }
      { 1470017 ;2   ;Action    ;
                      CaptionML=[ENU=Copy from Vendor;
                                 RUS=Копировать из данных поставщика];
                      ApplicationArea=#Basic,#Suite;
                      Image=Vendor;
                      OnAction=BEGIN
                                 CopyFromVendor(Rec);
                               END;
                                }
      { 1470018 ;2   ;Action    ;
                      CaptionML=[ENU=Combine Customers;
                                 RUS=Объединить клиентов];
                      ApplicationArea=#Basic,#Suite;
                      Image=Action;
                      OnAction=VAR
                                 JoinEntries@1470000 : Report 12465;
                               BEGIN
                                 JoinEntries.ChangeCustomer(Rec);
                                 JoinEntries.RUN;
                               END;
                                }
      { 130     ;1   ;ActionGroup;
                      Name=Prices and Discounts;
                      CaptionML=[ENU=Prices and Discounts;
                                 RUS=Цены и скидки] }
      { 83      ;2   ;Action    ;
                      CaptionML=[ENU=Invoice &Discounts;
                                 RUS=&Скидки по счету];
                      ToolTipML=[ENU=Set up different discounts that are applied to invoices for the customer. An invoice discount is automatically granted to the customer when the total on a sales invoice exceeds a certain amount.;
                                 RUS=Настройка различных скидок, применяемых к счетам для клиента. Скидка по счету автоматически предоставляется клиенту, когда итоговая сумма счета продажи превышает заданную.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 23;
                      RunPageLink=Code=FIELD(Invoice Disc. Code);
                      Image=CalculateInvoiceDiscount;
                      PromotedCategory=Category7 }
      { 113     ;2   ;Action    ;
                      CaptionML=[ENU=Prices;
                                 RUS=Цены];
                      ToolTipML=[ENU=View or set up different prices for items that you sell to the customer. An item price is automatically granted on invoice lines when the specified criteria are met, such as customer, quantity, or ending date.;
                                 RUS=Просмотр или настройка различных цен для товаров, которые вы продаете клиенту. Цена товара автоматически задается для строк счета при выполнении определенных условий, например условий по клиенту, количеству или дате окончания.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7002;
                      RunPageView=SORTING(Sales Type,Sales Code);
                      RunPageLink=Sales Type=CONST(Customer),
                                  Sales Code=FIELD(No.);
                      Image=Price }
      { 136     ;2   ;Action    ;
                      CaptionML=[ENU=Line Discounts;
                                 RUS=Скидки строки];
                      ToolTipML=[ENU=Set up different discounts for items that you sell to the customer. An item discount is automatically granted on invoice lines when the specified criteria are met, such as customer, quantity, or ending date.;
                                 RUS=Настройка различных скидок для товаров, которые вы продаете клиенту. Скидка по товару автоматически применяется к строкам счета при выполнении определенных условий, например условий по клиенту, количеству или дате окончания.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 7004;
                      RunPageView=SORTING(Sales Type,Sales Code);
                      RunPageLink=Sales Type=CONST(Customer),
                                  Sales Code=FIELD(No.);
                      Image=LineDiscount }
      { 82      ;1   ;ActionGroup;
                      CaptionML=[ENU=S&ales;
                                 RUS=Про&дажи];
                      Image=Sales }
      { 162     ;2   ;Action    ;
                      CaptionML=[ENU=Prepa&yment Percentages;
                                 RUS=Пр&оценты предоплаты];
                      RunObject=Page 664;
                      RunPageView=SORTING(Sales Type,Sales Code);
                      RunPageLink=Sales Type=CONST(Customer),
                                  Sales Code=FIELD(No.);
                      Image=PrepaymentPercentages }
      { 118     ;2   ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Recurring Sales Lines;
                                 RUS=Строки типовых продаж];
                      ToolTipML=[ENU=Set up recurring sales lines for the customer, such as a monthly replenishment order, that can quickly be inserted on a sales document for the customer.;
                                 RUS=Настройка строк типовых продаж для клиента, например ежемесячного заказа для пополнения запасов. Эти строки можно быстро вставлять в документ продажи клиенту.];
                      RunObject=Page 173;
                      RunPageLink=Customer No.=FIELD(No.);
                      PromotedIsBig=Yes;
                      Image=CustomerCode;
                      PromotedCategory=Category5 }
      { 7       ;1   ;ActionGroup;
                      CaptionML=[ENU=Documents;
                                 RUS=Документы];
                      Image=Documents }
      { 85      ;2   ;Action    ;
                      CaptionML=[ENU=Quotes;
                                 RUS=Предложения];
                      ToolTipML=[ENU=View a list of ongoing sales quotes for the customer.;
                                 RUS=Просмотр списка текущих предложений по продаже для клиента.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 9300;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Image=Quote }
      { 86      ;2   ;Action    ;
                      CaptionML=[ENU=Orders;
                                 RUS=Заказы];
                      ToolTipML=[ENU=View a list of ongoing sales orders for the customer.;
                                 RUS=Просмотр списка текущих заказов на продажу для клиента.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 9305;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Image=Document }
      { 121     ;2   ;Action    ;
                      CaptionML=[ENU=Return Orders;
                                 RUS=Возвраты];
                      RunObject=Page 9304;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Image=ReturnOrder }
      { 151     ;2   ;ActionGroup;
                      CaptionML=[ENU=Issued Documents;
                                 RUS=Учтенные документы];
                      Image=Documents }
      { 152     ;3   ;Action    ;
                      CaptionML=[ENU=Issued &Reminders;
                                 RUS=Учтенные &напоминания];
                      ToolTipML=[ENU=View the reminders that you have sent to the customer.;
                                 RUS=Просмотр напоминаний, отправленных клиенту.];
                      RunObject=Page 440;
                      RunPageView=SORTING(Customer No.,Posting Date);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=OrderReminder }
      { 153     ;3   ;Action    ;
                      CaptionML=[ENU=Issued &Finance Charge Memos;
                                 RUS=Учтенные &процент-ноты];
                      ToolTipML=[ENU=View the finance charge memos that you have sent to the customer.;
                                 RUS=Просмотр процент-нот, отправленных клиенту.];
                      RunObject=Page 452;
                      RunPageView=SORTING(Customer No.,Posting Date);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=FinChargeMemo }
      { 114     ;2   ;Action    ;
                      CaptionML=[ENU=Blanket Orders;
                                 RUS=Общие заказы];
                      RunObject=Page 9303;
                      RunPageView=SORTING(Document Type,Sell-to Customer No.);
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Image=BlanketOrder }
      { 147     ;2   ;Action    ;
                      CaptionML=[ENU=&Jobs;
                                 RUS=&Работы];
                      RunObject=Page 89;
                      RunPageView=SORTING(Bill-to Customer No.);
                      RunPageLink=Bill-to Customer No.=FIELD(No.);
                      Image=Job }
      { 13      ;1   ;ActionGroup;
                      CaptionML=[ENU=Service;
                                 RUS=Сервис];
                      Image=ServiceItem }
      { 128     ;2   ;Action    ;
                      CaptionML=[ENU=Service Orders;
                                 RUS=Сервисные заказы];
                      RunObject=Page 9318;
                      RunPageView=SORTING(Document Type,Customer No.);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=Document }
      { 126     ;2   ;Action    ;
                      CaptionML=[ENU=Ser&vice Contracts;
                                 RUS=Сервисные &контракты];
                      RunObject=Page 6065;
                      RunPageView=SORTING(Customer No.,Ship-to Code);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=ServiceAgreement }
      { 127     ;2   ;Action    ;
                      CaptionML=[ENU=Service &Items;
                                 RUS=Сервисные &товары];
                      RunObject=Page 5988;
                      RunPageView=SORTING(Customer No.,Ship-to Code,Item No.,Serial No.);
                      RunPageLink=Customer No.=FIELD(No.);
                      Image=ServiceItem }
      { 9       ;    ;ActionContainer;
                      ActionContainerType=NewDocumentItems }
      { 1902575205;1 ;Action    ;
                      Name=NewBlanketSalesOrder;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Blanket Sales Order;
                                 RUS=Общий заказ на продажу];
                      ToolTipML=[ENU=Create a blanket sales order for the customer.;
                                 RUS=Создание общего заказа на продажу для клиента.];
                      RunObject=Page 507;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=BlanketOrder;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1900246505;1 ;Action    ;
                      Name=NewSalesQuote;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Quote;
                                 RUS=Предложение по продаже];
                      ToolTipML=[ENU=Create a new sales quote where you offer items or services to a customer.;
                                 RUS=Создание предложения по продажам, в котором вы предлагаете клиенту товары или услуги.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 41;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=NewSalesQuote;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      RunPageMode=Create }
      { 1906384905;1 ;Action    ;
                      Name=NewSalesInvoice;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Invoice;
                                 RUS=Счет продажи];
                      ToolTipML=[ENU=Create a sales invoice for the customer.;
                                 RUS=Создание счета продажи для клиента.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 43;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=NewSalesInvoice;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      RunPageMode=Create }
      { 1904747105;1 ;Action    ;
                      Name=NewSalesOrder;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Order;
                                 RUS=Заказ на продажу];
                      ToolTipML=[ENU=Create a sales order for the customer.;
                                 RUS=Создание заказа на продажу для клиента.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 42;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Document;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      RunPageMode=Create }
      { 1902583505;1 ;Action    ;
                      Name=NewSalesCreditMemo;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Credit Memo;
                                 RUS=Кредит-нота продажи];
                      ToolTipML=[ENU=Create a new sales credit memo to revert a posted sales invoice.;
                                 RUS=Создание кредит-ноты продажи для сторнирования учтенного счета продажи.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 44;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=CreditMemo;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      RunPageMode=Create }
      { 1905163705;1 ;Action    ;
                      Name=NewSalesReturnOrder;
                      AccessByPermission=TableData 36=RIM;
                      CaptionML=[ENU=Sales Return Order;
                                 RUS=Возврат продажи];
                      ToolTipML=[ENU=Create a sales return order for the customer.;
                                 RUS=Создание заказа на возврат продажи для клиента.];
                      RunObject=Page 6630;
                      RunPageLink=Sell-to Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=ReturnOrder;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1905185205;1 ;Action    ;
                      Name=NewServiceQuote;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Quote;
                                 RUS=Сервисное предложение];
                      ToolTipML=[ENU=Create a service quote for the customer.;
                                 RUS=Создание сервисного предложения для клиента.];
                      RunObject=Page 5964;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=Quote;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1902079405;1 ;Action    ;
                      Name=NewServiceInvoice;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Invoice;
                                 RUS=Сервисный счет];
                      ToolTipML=[ENU=Create a service invoice for the customer.;
                                 RUS=Создание сервисного счета для клиента.];
                      RunObject=Page 5933;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=Invoice;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1907102005;1 ;Action    ;
                      Name=NewServiceOrder;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Order;
                                 RUS=Сервисный заказ];
                      ToolTipML=[ENU=Create a service order for the customer.;
                                 RUS=Создание сервисного заказа для клиента.];
                      RunObject=Page 5900;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=Document;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1901662105;1 ;Action    ;
                      Name=NewServiceCreditMemo;
                      AccessByPermission=TableData 5900=RIM;
                      CaptionML=[ENU=Service Credit Memo;
                                 RUS=Сервисная кредит-нота];
                      ToolTipML=[ENU=Create a service credit memo for the customer.;
                                 RUS=Создание сервисной кредит-ноты для клиента.];
                      RunObject=Page 5935;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=CreditMemo;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1903839805;1 ;Action    ;
                      Name=NewReminder;
                      AccessByPermission=TableData 295=RIM;
                      CaptionML=[ENU=Reminder;
                                 RUS=Напоминание];
                      ToolTipML=[ENU=Create a remainder for the customer.;
                                 RUS=Создание остатка для клиента.];
                      RunObject=Page 434;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Reminder;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1901102005;1 ;Action    ;
                      Name=NewFinanceChargeMemo;
                      AccessByPermission=TableData 302=RIM;
                      CaptionML=[ENU=Finance Charge Memo;
                                 RUS=Процент-нота];
                      ToolTipML=[ENU=Create a finance charge memo for the customer.;
                                 RUS=Создание процент-ноты для клиента.];
                      RunObject=Page 446;
                      RunPageLink=Customer No.=FIELD(No.);
                      Promoted=No;
                      Image=FinChargeMemo;
                      PromotedCategory=Category4;
                      RunPageMode=Create }
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 57      ;1   ;ActionGroup;
                      CaptionML=[ENU=Approval;
                                 RUS=Утверждение];
                      Visible=OpenApprovalEntriesExistCurrUser }
      { 56      ;2   ;Action    ;
                      Name=Approve;
                      CaptionML=[ENU=Approve;
                                 RUS=Утвердить];
                      ToolTipML=[ENU=Approve the requested changes.;
                                 RUS=Утверждение запрошенных изменений.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      PromotedIsBig=Yes;
                      Image=Approve;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.ApproveRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 390     ;2   ;Action    ;
                      Name=Reject;
                      CaptionML=[ENU=Reject;
                                 RUS=Отклонить];
                      ToolTipML=[ENU=Reject the approval request.;
                                 RUS=Отклонение запроса на утверждение.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      PromotedIsBig=Yes;
                      Image=Reject;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.RejectRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 41      ;2   ;Action    ;
                      Name=Delegate;
                      CaptionML=[ENU=Delegate;
                                 RUS=Делегировать];
                      ToolTipML=[ENU=Delegate the approval to a substitute approver.;
                                 RUS=Делегирование утверждения заместителю утверждающего лица.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=Delegate;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.DelegateRecordApprovalRequest(RECORDID);
                               END;
                                }
      { 148     ;2   ;Action    ;
                      Name=Comment;
                      CaptionML=[ENU=Comments;
                                 RUS=Комментарии];
                      ToolTipML=[ENU=View or add comments.;
                                 RUS=Просмотр или добавление комментариев.];
                      ApplicationArea=#All;
                      Promoted=Yes;
                      Visible=OpenApprovalEntriesExistCurrUser;
                      Image=ViewComments;
                      PromotedCategory=Category5;
                      OnAction=VAR
                                 ApprovalsMgmt@1000 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.GetApprovalComment(Rec);
                               END;
                                }
      { 45      ;1   ;ActionGroup;
                      CaptionML=[ENU=Request Approval;
                                 RUS=Утверждение запросов];
                      Image=SendApprovalRequest }
      { 55      ;2   ;Action    ;
                      Name=SendApprovalRequest;
                      CaptionML=[ENU=Send A&pproval Request;
                                 RUS=Отправить &запрос на утверждение];
                      ToolTipML=[ENU=Send an approval request.;
                                 RUS=Отправка запроса на утверждение.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled=(NOT OpenApprovalEntriesExist) AND EnabledApprovalWorkflowsExist;
                      Image=SendApprovalRequest;
                      PromotedCategory=Category6;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                               BEGIN
                                 IF ApprovalsMgmt.CheckCustomerApprovalsWorkflowEnabled(Rec) THEN
                                   ApprovalsMgmt.OnSendCustomerForApproval(Rec);
                               END;
                                }
      { 37      ;2   ;Action    ;
                      Name=CancelApprovalRequest;
                      CaptionML=[ENU=Cancel Approval Re&quest;
                                 RUS=Отменить за&прос на утверждение];
                      ToolTipML=[ENU=Cancel the approval request.;
                                 RUS=Отмена запроса на утверждение.];
                      ApplicationArea=#Suite;
                      Promoted=Yes;
                      Enabled=CanCancelApprovalForRecord;
                      Image=CancelApprovalRequest;
                      PromotedCategory=Category6;
                      PromotedOnly=Yes;
                      OnAction=VAR
                                 ApprovalsMgmt@1001 : Codeunit 1535;
                               BEGIN
                                 ApprovalsMgmt.OnCancelCustomerApprovalRequest(Rec);
                               END;
                                }
      { 142     ;1   ;ActionGroup;
                      CaptionML=[ENU=Workflow;
                                 RUS=Рабочий процесс] }
      { 17      ;2   ;Action    ;
                      Name=CreateApprovalWorkflow;
                      CaptionML=[ENU=Create Approval Workflow;
                                 RUS=Создать рабочий процесс утверждения];
                      ToolTipML=[ENU=Set up an approval workflow for creating or changing customers, by going through a few pages that will guide you.;
                                 RUS=Настройка рабочего процесса утверждения для создания или изменения клиентов. Рабочий процесс состоит из нескольких страниц, которые помогают выполнить эту задачу.];
                      Enabled=NOT EnabledApprovalWorkflowsExist;
                      Image=CreateWorkflow;
                      OnAction=BEGIN
                                 PAGE.RUNMODAL(PAGE::"Cust. Approval WF Setup Wizard");
                               END;
                                }
      { 138     ;2   ;Action    ;
                      Name=ManageApprovalWorkflows;
                      CaptionML=[ENU=Manage Approval Workflows;
                                 RUS=Управление рабочими процессами утверждения];
                      ToolTipML=[ENU=View or edit existing approval workflows for creating or changing customers.;
                                 RUS=Просмотр или изменение имеющихся рабочих процессов утверждения для создания или изменения клиентов.];
                      Enabled=EnabledApprovalWorkflowsExist;
                      Image=WorkflowSetup;
                      OnAction=VAR
                                 WorkflowManagement@1000 : Codeunit 1501;
                               BEGIN
                                 WorkflowManagement.NavigateToWorkflows(DATABASE::Customer,EventFilter);
                               END;
                                }
      { 163     ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 RUS=Ф&ункции];
                      Image=Action }
      { 139     ;2   ;Action    ;
                      Name=Templates;
                      CaptionML=[ENU=Templates;
                                 RUS=Шаблоны];
                      ToolTipML=[ENU=View or edit customer templates.;
                                 RUS=Просмотр или изменение шаблонов клиентов.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 1340;
                      RunPageLink=Table ID=CONST(18);
                      PromotedIsBig=Yes;
                      Image=Template }
      { 167     ;2   ;Action    ;
                      Name=ApplyTemplate;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Apply Template;
                                 RUS=Заполнить по шаблону];
                      ToolTipML=[ENU=Apply a customer template to quickly register this customer.;
                                 RUS=Применение шаблона клиента для быстрой регистрации этого клиента.];
                      ApplicationArea=#Basic,#Suite;
                      Image=ApplyTemplate;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 MiniCustomerTemplate@1002 : Record 1300;
                               BEGIN
                                 MiniCustomerTemplate.UpdateCustomerFromTemplate(Rec);
                               END;
                                }
      { 132     ;2   ;Action    ;
                      Name=SaveAsTemplate;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Save as Template;
                                 RUS=Сохранить как шаблон];
                      ToolTipML=[ENU=Save the customer card as a template that can be reused to create new customer cards. Customer templates contain preset information to help you fill fields on customer cards.;
                                 RUS=Сохранение карточки клиента в качестве шаблона, который может повторно использоваться при создании новых карточек клиентов. Шаблоны клиентов содержат предустановленные сведения, помогающие заполнять поля в карточках клиентов.];
                      ApplicationArea=#Basic,#Suite;
                      PromotedIsBig=Yes;
                      Image=Save;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 TempMiniCustomerTemplate@1000 : TEMPORARY Record 1300;
                               BEGIN
                                 TempMiniCustomerTemplate.SaveAsTemplate(Rec);
                               END;
                                }
      { 1900839804;1 ;Action    ;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Post Cash Receipts;
                                 RUS=Учесть приходные кассовые ордера];
                      ToolTipML=[ENU=Create a cash receipt journal line for the customer, for example, to post a payment receipt.;
                                 RUS=Создание строки журнала приходных кассовых ордеров для клиента, например для учета получения платежа.];
                      RunObject=Page 255;
                      Image=CashReceiptJournal;
                      PromotedCategory=Process }
      { 1905171704;1 ;Action    ;
                      CaptionML=[ENU=Sales Journal;
                                 RUS=Журнал продаж];
                      RunObject=Page 253;
                      Image=Journals;
                      PromotedCategory=Process }
      { 1101495028;1 ;Action    ;
                      CaptionML=[ENU=Transfer to new customer;
                                 RUS=Перенести на клиента];
                      Image=MoveDown;
                      OnAction=VAR
                                 CVLedgerEntryMerger@1101495000 : Report 50027;
                               BEGIN
                                 //NC OAM47 > DP
                                 CLEAR(CVLedgerEntryMerger);
                                 CVLedgerEntryMerger.SetValues(0,"No.",'');
                                 CVLedgerEntryMerger.RUNMODAL;
                                 //NC OAM47 < DP
                               END;
                                }
      { 1101495029;1 ;Action    ;
                      CaptionML=[ENU=Change Segment;
                                 RUS=Изменить Сегмент];
                      Image=ChangeCustomer;
                      OnAction=VAR
                                 UserSetup@1101495003 : Record 91;
                                 Segment@1101495002 : Record 50190;
                                 SegmentTemp@1101495001 : TEMPORARY Record 50190;
                                 MovingDataSetup@1101495004 : Record 50064;
                                 DimValue@1101495005 : Record 349;
                                 IsAddGlobal@1101495000 : Boolean;
                               BEGIN
                                 //NC S1883 > PCH
                                 UserSetup.GET(USERID);
                                 UserSetup.TESTFIELD("Data Admin",TRUE);

                                 SegmentTemp.RESET;
                                 SegmentTemp.DELETEALL;
                                 Segment.RESET;
                                 IF Segment.FINDSET THEN REPEAT
                                   SegmentTemp := Segment;
                                   SegmentTemp.INSERT;
                                   IF SegmentTemp."Is General" THEN
                                     IsAddGlobal := TRUE;
                                 UNTIL Segment.NEXT = 0;

                                 IF NOT IsAddGlobal THEN BEGIN
                                   SegmentTemp.INIT;
                                   SegmentTemp.Code := '<EMPTY>';
                                   SegmentTemp.Name := 'Empty';
                                   SegmentTemp."Is General" := TRUE;
                                   SegmentTemp.INSERT;
                                 END;

                                 IF "Segment Code" <> '' THEN
                                   IF SegmentTemp.GET("Segment Code") THEN ;

                                 IF ACTION::LookupOK = PAGE.RUNMODAL(PAGE::Segments,SegmentTemp) THEN BEGIN
                                   IF SegmentTemp."Is General" THEN
                                     "Segment Code" := ''
                                   ELSE
                                     "Segment Code" := SegmentTemp.Code;
                                   MODIFY;

                                   MovingDataSetup.GET;
                                   IF DimValue.GET(MovingDataSetup."Customer Dimension Code","No.") THEN BEGIN
                                     DimValue."Segment Code" := "Segment Code";
                                     DimValue.MODIFY;
                                   END;
                                   IF DimValue.GET(MovingDataSetup."Real Counterparty Dim. Code","No.") THEN BEGIN
                                     DimValue."Segment Code" := "Segment Code";
                                     DimValue.MODIFY;
                                   END;

                                   CurrPage.UPDATE(FALSE);
                                 END;
                                 //NC S1883 < PCH
                               END;
                                }
      { 1101495030;1 ;Action    ;
                      CaptionML=[ENU=Edit Group;
                                 RUS=Редактировать Группу];
                      Promoted=Yes;
                      Image=EditCustomer;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 // #TODO# перенести Report50231
                                 {
                                 //TDRANCS-2273>
                                 CLEAR(l_repICCor);
                                 l_repICCor.fn_SetParam(18,"No.");
                                 l_repICCor.RUNMODAL;
                                 }
                               END;
                                }
      { 1900000006;0 ;ActionContainer;
                      ActionContainerType=Reports }
      { 1906813206;1 ;Action    ;
                      Name=Report Customer Detailed Aging;
                      CaptionML=[ENU=Customer Detailed Aging;
                                 RUS=Клиент - сводка задолженности с распределением по срокам (подробно)];
                      ToolTipML=[ENU=View a detailed list of each customer's total payments due, divided into three time periods. The report can be used to decide when to issue reminders, to evaluate a customer's creditworthiness, or to prepare liquidity analyses.;
                                 RUS=Просмотр подробного списка причитающихся платежей каждого из клиентов с разделением по трем временным периодам. Отчет может помочь определить, когда следует направлять напоминания, оценить кредитоспособность клиента и подготовить анализ ликвидности.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer Detailed Aging","No.");
                               END;
                                }
      { 1907586706;1 ;Action    ;
                      Name=Report Customer - Labels;
                      CaptionML=[ENU=Customer - Labels;
                                 RUS=Клиент - этикетки];
                      ToolTipML=[ENU=View mailing labels with the customers' names and addresses.;
                                 RUS=Просмотр почтовых этикеток с именами и адресами клиентов.];
                      Promoted=No;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer - Labels","No.");
                               END;
                                }
      { 1902299006;1 ;Action    ;
                      Name=Report Customer - Balance to Date;
                      CaptionML=[ENU=Customer - Balance to Date;
                                 RUS=Клиент - баланс на дату];
                      ToolTipML=[ENU=View a list with customers' payment history up until a certain date. You can use the report to extract your total sales income at the close of an accounting period or fiscal year.;
                                 RUS=Просмотр списка с историей платежей клиентов до определенной даты. Этот отчет можно использовать для получения суммы общего дохода от продаж при закрытии учетного периода или финансового года.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer - Balance to Date","No.");
                               END;
                                }
      { 133     ;1   ;Action    ;
                      Name=Report Statement;
                      CaptionML=[ENU=Statement;
                                 RUS=Выписка];
                      ToolTipML=[ENU=View a list of a customer's transactions for a selected period, for example, to send to the customer at the close of an accounting period. You can choose to have all overdue balances displayed regardless of the period specified, or you can choose to include an aging band.;
                                 RUS=Просмотр списка транзакций клиента за выбранный период, например для отправки клиенту при закрытии учетного периода. Вы можете выбрать отображение всех просроченных задолженностей вне зависимости от заданного периода или же включить определенный период старения.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Codeunit 8810;
                      Image=Report }
      { 1902622106;1 ;Action    ;
                      CaptionML=[ENU=Customer - Reconciliation Act;
                                 RUS=Клиент - акт выверки];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=No;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 RunReport(REPORT::"Customer - Reconciliation Act","No.");
                               END;
                                }
      { 1902877406;1 ;Action    ;
                      CaptionML=[ENU=Customer G/L Turnover;
                                 RUS=Клиент - оборотная ведомость по ГК];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 12406;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report }
    }
  }
  CONTROLS
  {
    { 1900000001;;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                CaptionML=[ENU=General;
                           RUS=Общее] }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the customer. The field is either filled automatically from a defined number series, or you enter the number manually because you have enabled manual number entry in the number-series setup.;
                           RUS=Определяет номер клиента. Поле заполняется автоматически на основании заданной серии номеров, либо пользователь вводит номер вручную, поскольку в параметрах серий номеров выбран ввод номеров вручную.];
                ApplicationArea=#All;
                SourceExpr="No.";
                Importance=Promoted;
                Visible=NoFieldVisible;
                OnAssistEdit=BEGIN
                               IF AssistEdit(xRec) THEN
                                 CurrPage.UPDATE;
                             END;
                              }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's name. This name will appear on all sales documents for the customer. You can enter a maximum of 50 characters, both numbers and letters.;
                           RUS=Определяет имя клиента. Это имя будет отображаться на всех документах продажи для клиента. Длина имени не должна превышать 50 символов (букв и цифр).];
                ApplicationArea=#All;
                SourceExpr=Name;
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 1210002;2;Field     ;
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Full Name" }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies an alternate name that you can use to search for a customer.;
                           RUS=Определяет альтернативное имя, которое можно использовать для поиска клиента.];
                SourceExpr="Search Name";
                Importance=Additional;
                Visible=FALSE }

    { 154 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's IC partner code, if the customer is one of your intercompany partners.;
                           RUS=Определяет код МФ-партнера, присвоенный клиенту, если этот клиент является одним из ваших межфирменных-партнеров.];
                SourceExpr="IC Partner Code";
                Importance=Additional }

    { 20  ;2   ;Field     ;
                Name=Balance (LCY);
                ToolTipML=[ENU=Specifies the payment amount that the customer owes for completed sales. This value is also known as the customer's balance.;
                           RUS=Определяет сумму, которую должен заплатить клиент за завершенные продажи. Это значение также называется сальдо клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance (LCY)";
                OnDrillDown=BEGIN
                              OpenCustomerLedgerEntries(FALSE);
                            END;
                             }

    { 1101495017;2;Field  ;
                SourceExpr="Balance at Date (LCY)" }

    { 144 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies payments from the customer that are overdue per today's date.;
                           RUS=Определяет платежи от клиента, которые просрочены на текущую дату.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance Due (LCY)";
                OnDrillDown=BEGIN
                              OpenCustomerLedgerEntries(TRUE);
                            END;
                             }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the maximum amount you allow the customer to exceed the payment balance before warnings are issued.;
                           RUS=Определяет максимальную сумму превышения платежного баланса для клиента, после достижения которой выписывается предупреждение.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Credit Limit (LCY)";
                StyleExpr=StyleTxt;
                OnValidate=BEGIN
                             StyleTxt := SetStyle;
                           END;
                            }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which transactions with the customer that cannot be blocked, for example, because the customer is insolvent.;
                           RUS=Определяет, какие транзакции с клиентом не должны блокироваться, например потому, что клиент является неплатежеспособным.];
                SourceExpr=Blocked }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the salesperson who normally handles this customer's account.;
                           RUS=Определяет код менеджера по продажам, который будет в общем случае обрабатывать счет этого клиента.];
                ApplicationArea=#Suite;
                SourceExpr="Salesperson Code";
                Importance=Additional }

    { 64  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the responsibility center that will administer this customer by default.;
                           RUS=Определяет код центра ответственности, который будет заниматься этим клиентом по умолчанию.];
                SourceExpr="Responsibility Center";
                Importance=Additional }

    { 93  ;2   ;Field     ;
                ToolTipML=[ENU=Contains the code for the service zone that is assigned to the customer.;
                           RUS=Содержит код сервисной зоны, которая назначена клиенту.];
                SourceExpr="Service Zone Code";
                Importance=Additional }

    { 137 ;2   ;Field     ;
                Name=BlockedCustomer;
                CaptionML=[ENU=Blocked;
                           RUS=Заблокировано];
                ToolTipML=[ENU=Specifies if transactions with the customer are blocked, for example, because the customer is insolvent.;
                           RUS=Определяет, должны ли блокироваться транзакции с клиентом, например потому, что клиент является неплатежеспособным.];
                OptionCaptionML=[ENU=" ,,,All";
                                 RUS=" ,,,Все"];
                ApplicationArea=#All;
                SourceExpr=BlockedCustomer;
                Visible=FoundationOnly;
                Enabled=DynamicEditable;
                OnValidate=BEGIN
                             IF BlockedCustomer THEN
                               Blocked := Blocked::All
                             ELSE
                               Blocked := Blocked::" ";
                           END;
                            }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the preferred method of sending documents to this customer, so that you do not have to select a sending option every time that you post and send a document to the customer. Sales documents to this customer will be sent using the specified sending profile and will override the default document sending profile.;
                           RUS=Определяет предпочитаемый метод отправки документов этому клиенту, чтобы не выбирать вариант отправки каждый раз при учете и отправке документа клиенту. Документы продажи этому клиенту будут отправляться с использованием указанного профиля отправки и будут переопределять профиль отправки документов по умолчанию.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Document Sending Profile";
                Importance=Additional }

    { 73  ;2   ;Field     ;
                Name=TotalSales2;
                CaptionML=[ENU=Total Sales;
                           RUS=Общая продажа];
                ToolTipML=[ENU=Specifies your total sales turnover with the customer in the current fiscal year. It is calculated from amounts excluding VAT on all completed and open invoices and credit memos.;
                           RUS=Определяет общий оборот продаж клиенту в текущем финансовом году. Это значение вычисляется на основании сумм без НДС по всем завершенным и открытым счетам и кредит-нотам.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetTotalSales;
                Style=Strong;
                StyleExpr=TRUE }

    { 72  ;2   ;Field     ;
                CaptionML=[ENU=Costs (LCY);
                           RUS=Себестоимость (руб.)];
                ToolTipML=[ENU=Specifies how much cost you have incurred from the customer in the current fiscal year.;
                           RUS=Определяет затраты, понесенные при работе с клиентом в текущем финансовом году.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CustSalesLCY - CustProfit - AdjmtCostLCY;
                AutoFormatType=1 }

    { 71  ;2   ;Field     ;
                CaptionML=[ENU=Profit (LCY);
                           RUS=Прибыль (руб.)];
                ToolTipML=[ENU=Specifies how much profit you have made from the customer in the current fiscal year.;
                           RUS=Определяет прибыль, полученную при работе с клиентом в текущем финансовом году.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=AdjCustProfit;
                AutoFormatType=1;
                Importance=Additional;
                Editable=False }

    { 69  ;2   ;Field     ;
                CaptionML=[ENU=Profit %;
                           RUS=Прибыль (%)];
                ToolTipML=[ENU=Specifies how much profit you have made from the customer in the current fiscal year, expressed as a percentage of the customer's total sales.;
                           RUS=Определяет прибыль, полученную при работе с клиентом в текущем финансовом году, в виде процента от суммарного значения продаж этому клиенту.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=1:1;
                SourceExpr=AdjProfitPct;
                Importance=Additional;
                Editable=False }

    { 1101495018;2;Field  ;
                SourceExpr="Relationship to the Group";
                OnValidate=BEGIN
                             //TDRANCS-2273>
                             g_recUserSetup.GET(USERID);
                             IF NOT g_recUserSetup."Allow Edit Count. IC Code" THEN
                               ERROR(Text50003,g_recUserSetup.FIELDCAPTION(g_recUserSetup."Allow Edit Count. IC Code"));
                             //TDRANCS-2273<

                             //NC NOS-26 > SPA
                             ICCounterpartyEditable := "Relationship to the Group";
                             //NC NOS-26 < SPA
                           END;
                            }

    { 1101495005;2;Field  ;
                SourceExpr="IC Dimension Value Code";
                Editable=ICCounterpartyEditable;
                OnValidate=BEGIN
                             //TDRANCS-2273>
                             g_recUserSetup.GET(USERID);
                             IF NOT g_recUserSetup."Allow Edit Count. IC Code" THEN
                               ERROR(Text50003,g_recUserSetup.FIELDCAPTION(g_recUserSetup."Allow Edit Count. IC Code"));
                             //TDRANCS-2273<
                             ICCounterparty := "IC Dimension Value Code";
                             SetICCode;
                           END;

                OnLookup=VAR
                           ConsSetup@1101495000 : Record 50000;
                           DimValue@1101495001 : Record 349;
                         BEGIN
                           //NC MDB05.1 > DP
                           ConsSetup.GET;
                           ConsSetup.TESTFIELD("IC Dimension Code");
                           DimValue.RESET;
                           DimValue.SETRANGE("Dimension Code",ConsSetup."IC Dimension Code");
                           IF PAGE.RUNMODAL(0, DimValue) = ACTION::LookupOK THEN BEGIN
                             VALIDATE("IC Dimension Value Code", DimValue.Code);
                             ICCounterparty := DimValue.Code;
                             SetICCode;
                           END;
                           //NC MDB05.1 < DP
                         END;
                          }

    { 1101495000;2;Field  ;
                SourceExpr="Counterparty Category" }

    { 1101495001;2;Field  ;
                SourceExpr="Counterparty Type" }

    { 1101495016;2;Field  ;
                SourceExpr="Related Counterparty Type Code" }

    { 1101495006;2;Field  ;
                SourceExpr="Resident/Non-resident" }

    { 1101495002;2;Field  ;
                SourceExpr=Industry }

    { 1101495003;2;Field  ;
                SourceExpr="Customer Segment" }

    { 1101495004;2;Field  ;
                SourceExpr="Customer ID";
                Editable=FALSE }

    { 1101495007;2;Field  ;
                SourceExpr="Segment Code";
                Editable=FALSE }

    { 1901061301;1;Group  ;
                CaptionML=[ENU=Vendor;
                           RUS=Поставщик] }

    { 1470008;2;Field     ;
                ToolTipML=[ENU=Specifies the vendor number associated with the customer.;
                           RUS=Определяет номер поставщика, связанный с клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Vendor No.";
                OnValidate=BEGIN
                             VendorNoOnAfterValidate;
                           END;
                            }

    { 1470010;2;Field     ;
                Name=VendorName;
                ToolTipML=[ENU=Specifies the vendor name associated with the customer.;
                           RUS=Определяет имя поставщика, связанное с клиентом.];
                ApplicationArea=#All;
                SourceExpr="Vendor Name";
                Visible=VendorNameVisible }

    { 1470012;2;Field     ;
                Name=VendorBalance;
                CaptionML=[ENU=Vendor Balance (LCY);
                           RUS=Баланс поставщика (руб.)];
                ApplicationArea=#All;
                SourceExpr=Vend."Balance (LCY)";
                Visible=VendorBalanceVisible;
                Editable=FALSE }

    { 1470015;2;Field     ;
                Name=TotalBalance;
                CaptionML=[ENU=Total Balance (LCY);
                           RUS=Общее сальдо (руб.)];
                ApplicationArea=#All;
                SourceExpr="Balance (LCY)" - Vend."Balance (LCY)";
                Visible=TotalBalanceVisible;
                Editable=FALSE }

    { 1905596001;1;Group  ;
                CaptionML=[ENU=Agreements;
                           RUS=Договоры] }

    { 1210000;2;Field     ;
                ToolTipML=[ENU=Specifies the agreement posting associated with the customer.;
                           RUS=Определяет учет договоров, связанный с клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Agreement Posting" }

    { 1210006;2;Field     ;
                ToolTipML=[ENU=Specifies the agreement number associated with the customer.;
                           RUS=Определяет номер соглашения, связанный с клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Agreement Nos." }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies when the customer card was last modified.;
                           RUS=Определяет дату последнего изменения карточки клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Last Date Modified";
                Importance=Additional }

    { 1902768601;1;Group  ;
                CaptionML=[ENU=Address & Contact;
                           RUS=Адрес и контакты];
                GroupType=Group }

    { 63  ;2   ;Group     ;
                Name=AddressDetails;
                CaptionML=[ENU=Address;
                           RUS=Адрес];
                GroupType=Group }

    { 6   ;3   ;Field     ;
                Name=Address;
                ToolTipML=[ENU=Specifies the customer's address. This address will appear on all sales documents for the customer.;
                           RUS=Определяет адрес клиента. Этот адрес будет отображаться на всех документах продажи для клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Address }

    { 8   ;3   ;Field     ;
                ToolTipML=[ENU=Specifies additional address information.;
                           RUS=Определяет дополнительные сведения адреса.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Address 2" }

    { 90  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the postal code.;
                           RUS=Определяет почтовый индекс.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Post Code";
                Importance=Promoted }

    { 10  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's city.;
                           RUS=Определяет город клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=City }

    { 91  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the country/region of the address.;
                           RUS=Определяет страну/регион для адреса.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Country/Region Code" }

    { 125 ;3   ;Field     ;
                Name=ShowMap;
                ToolTipML=[ENU=Specifies the customer's address on your preferred map website.;
                           RUS=Определяет адреса клиента на предпочитаемом вами веб-сайте с картами.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ShowMapLbl;
                Editable=FALSE;
                Style=StrongAccent;
                StyleExpr=TRUE;
                OnDrillDown=BEGIN
                              CurrPage.UPDATE(TRUE);
                              DisplayMap;
                            END;

                ShowCaption=No }

    { 65  ;2   ;Group     ;
                Name=ContactDetails;
                CaptionML=[ENU=Contact;
                           RUS=Контакт];
                GroupType=Group }

    { 122 ;3   ;Field     ;
                CaptionML=[ENU=Primary Contact Code;
                           RUS=Код основного контакта];
                ToolTipML=[ENU=Specifies the primary contact number for the customer.;
                           RUS=Определяет основной номер контакта для клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Primary Contact No." }

    { 16  ;3   ;Field     ;
                Name=ContactName;
                CaptionML=[ENU=Contact Name;
                           RUS=Имя контакта];
                ToolTipML=[ENU=Specifies the name of the person you regularly contact when you do business with this customer.;
                           RUS=Определяет имя лица, с которым регулярно осуществляется контакт при ведении бизнеса с этим клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Contact;
                Importance=Promoted;
                Editable=ContactEditable;
                OnValidate=BEGIN
                             ContactOnAfterValidate;
                           END;
                            }

    { 12  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's telephone number.;
                           RUS=Определяет номер телефона клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Phone No." }

    { 107 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's email address.;
                           RUS=Определяет адрес электронной почты клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="E-Mail";
                Importance=Promoted }

    { 104 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's fax number.;
                           RUS=Определяет номер факса клиента.];
                SourceExpr="Fax No.";
                Importance=Additional }

    { 109 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's home page address.;
                           RUS=Определяет адрес сайта клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Home Page" }

    { 66  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the language to be used on printouts for this customer.;
                           RUS=Определяет язык, который будет использоваться при печати для данного клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Language Code";
                Importance=Additional }

    { 1101495008;3;Field  ;
                SourceExpr="CRM ID" }

    { 1905885101;1;Group  ;
                CaptionML=[ENU=Invoicing;
                           RUS=Счет] }

    { 34  ;2   ;Field     ;
                CaptionML=[ENU=Bill-to Customer;
                           RUS=Плательщик];
                ToolTipML=[ENU=Specifies a different customer who will be invoiced for products that you sell to the customer in the Name field on the customer card.;
                           RUS=Определяет другого клиента, которому должен выставляться счет за продукты, продаваемые клиенту, который указан в поле "Имя" карточки клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bill-to Customer No.";
                Importance=Additional }

    { 29  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's VAT registration number for customers in EU countries/regions.;
                           RUS=Определяет ИНН клиента для клиентов из стран и регионов ЕС.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Registration No.";
                OnDrillDown=VAR
                              VATRegistrationLogMgt@1000 : Codeunit 249;
                            BEGIN
                              VATRegistrationLogMgt.AssistEditCustomerVATReg(Rec);
                            END;
                             }

    { 61  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer in connection with electronic document sending.;
                           RUS=Определяет клиента в связи с электронной отправкой документов.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GLN;
                Importance=Additional }

    { 156 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies which customer address is inserted on sales quotes that you create for the customer.;
                           RUS=Определяет, какой адрес клиента указывается на предложениях по продаже, создаваемых для этого клиента.];
                SourceExpr="Copy Sell-to Addr. to Qte From" }

    { 1470000;2;Field     ;
                ToolTipML=[ENU=This field is used internally.;
                           RUS=Это поле предназначено для внутреннего использования.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Act Signed by Name" }

    { 1470002;2;Field     ;
                ToolTipML=[ENU=This field is used internally.;
                           RUS=Это поле предназначено для внутреннего использования.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Act Signed by Position" }

    { 70  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's trade type to link transactions made for this customer with the appropriate general ledger account according to the general posting setup.;
                           RUS=Определяет тип торговых операций клиента, чтобы связать транзакции, сделанные для этого клиента, с соответствующим счетом главной книги согласно настройке общего учета.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Gen. Bus. Posting Group";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's VAT specification to link transactions made for this customer to.;
                           RUS=Определяет спецификацию НДС клиента для связывания с транзакциями этого клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Bus. Posting Group";
                Importance=Additional }

    { 38  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's market type to link business transactions to.;
                           RUS=Определяет тип рынка клиента для связывания с бизнес-транзакциями.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Posting Group";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many copies of a invoice for the customer will be printed at a time.;
                           RUS=Определяет число копий счета для клиента, которое будет печататься за раз.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Invoice Copies";
                Importance=Additional }

    { 68  ;2   ;Group     ;
                Name=PricesandDiscounts;
                CaptionML=[ENU=Prices and Discounts;
                           RUS=Цены и скидки];
                GroupType=Group }

    { 67  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the default currency for the customer.;
                           RUS=Определяет используемую по умолчанию валюту для клиента.];
                ApplicationArea=#Suite;
                SourceExpr="Currency Code";
                Importance=Additional }

    { 40  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer price group code, which you can use to set up special sales prices in the Sales Prices window.;
                           RUS=Определяет код ценовой группы клиента, который можно использовать для настройки специальных цен продажи в окне "Цены продажи".];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Price Group";
                Importance=Promoted }

    { 44  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies the customer discount group code, which you can use as a criterion to set up special discounts in the Sales Line Discounts window.;
                           RUS=Определяет код группы скидок клиента, который можно использовать в качестве условия для настройки специальных скидок в окне "Скидки строки продаж".];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Customer Disc. Group";
                Importance=Promoted }

    { 46  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies if a sales line discount is calculated when a special sales price is offered according to setup in the Sales Prices window.;
                           RUS=Определяет, рассчитывается ли скидка строки продажи, когда предлагается специальная цена продажи в соответствии с настройкой в окне "Цены продажи".];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Line Disc.";
                Importance=Additional }

    { 42  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the invoice discount terms that you have defined for the customer.;
                           RUS=Определяет код условий предоставления скидки по счету, определенных для клиента.];
                ApplicationArea=#Basic,#Suite;
                NotBlank=Yes;
                SourceExpr="Invoice Disc. Code";
                Importance=Additional }

    { 129 ;3   ;Field     ;
                ToolTipML=[ENU=Specifies if the Unit Price and Line Amount fields on sales lines for this customer should be shown with or without VAT.;
                           RUS=Определяет, должны ли поля "Цена единицы" и "Сумма строки" в строках продажи для этого клиента содержать значения с НДС или без НДС.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Prices Including VAT";
                Importance=Additional }

    { 1901677601;1;Group  ;
                CaptionML=[ENU=Payments;
                           RUS=Платежи] }

    { 160 ;2   ;Field     ;
                ToolTipML=[ENU=Contains a prepayment percentage that applies to all orders for this customer, regardless of the items or services on the order lines.;
                           RUS=Содержит процент предоплаты, который применяется ко всем заказам этого клиента, независимо от того, содержатся в строках заказа товары или услуги.];
                SourceExpr="Prepayment %";
                Importance=Additional }

    { 48  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how to apply payments to entries for this customer.;
                           RUS=Определяет порядок применения платежей к операциям этого клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Application Method";
                Importance=Additional }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies for direct debit collections if the customer that the payment is collected from is a person or a company.;
                           RUS=Определяет погашения прямого дебетования, если клиент, от которого получен платеж, является частным лицом или компанией.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Partner Type";
                Importance=Additional }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code that indicates the payment terms that you require of the customer.;
                           RUS=Определяет код, указывающий условия оплаты, которые вы требуете от клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Terms Code";
                Importance=Promoted;
                ShowMandatory=TRUE }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how the customer usually submits payment, such as bank transfer or check.;
                           RUS=Определяет обычный способ отправки платежа клиентом: например, с помощью банковского перевода или чека.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payment Method Code";
                Importance=Additional }

    { 15  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how reminders about late payments are handled for this customer.;
                           RUS=Определяет способ обработки напоминаний о просрочках платежей для этого клиента.];
                SourceExpr="Reminder Terms Code";
                Importance=Additional }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies finance charges are calculated for the customer.;
                           RUS=Определяет, что для клиента рассчитываются процентные ставки.];
                SourceExpr="Fin. Charge Terms Code";
                Importance=Additional }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a payment term that will be used to calculate cash flow for the customer.;
                           RUS=Определяет срок платежа, который будет использоваться для расчета движения денежных средств для клиента.];
                SourceExpr="Cash Flow Payment Terms Code";
                Importance=Additional }

    { 1470006;2;Field     ;
                ToolTipML=[ENU=Specifies the default bank code associated with the customer.;
                           RUS=Определяет код банка по умолчанию, который связан с клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Default Bank Code" }

    { 1470004;2;Field     ;
                ToolTipML=[ENU=Specifies the code of the company registration associated with the customer.;
                           RUS=Определяет код регистрации компании, связанный с клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="KPP Code" }

    { 1210010;2;Field     ;
                ToolTipML=[ENU=Specifies the Classification of Enterprises and Organizations code associated with the customer.;
                           RUS=Определяет код классификации предприятий и организаций, связанный с клиентом.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="OKPO Code" }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to include this customer when you print the Statement report.;
                           RUS=Определяет, нужно ли включать этого клиента при печати выписок.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Print Statements";
                Importance=Additional }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the last statement that was printed for this customer.;
                           RUS=Определяет номер последней выписки, напечатанной для этого клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Last Statement No.";
                Importance=Additional }

    { 143 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies that the customer is not allowed a payment tolerance.;
                           RUS=Определяет, что клиенту не разрешено отклонение в оплате.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Block Payment Tolerance";
                Importance=Additional }

    { 25  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the customer's bank account that will be used by default when you process refunds to the customer and direct debit collections.;
                           RUS=Определяет банковский счет клиента, который будет использоваться по умолчанию при обработке возврата средств клиенту и погашений прямого дебетования.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Preferred Bank Account Code";
                Importance=Additional }

    { 1906801201;1;Group  ;
                CaptionML=[ENU=Shipping;
                           RUS=Отгрузка] }

    { 95  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies from which location sales to this customer will be processed by default.;
                           RUS=Определяет, с какого склада будут по умолчанию обрабатываться продажи этому клиенту.];
                SourceExpr="Location Code";
                Importance=Promoted }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if several orders delivered to the customer can appear on the same sales invoice.;
                           RUS=Определяет, можно ли объединять в один счет продажи несколько заказов, доставляемых клиенту.];
                SourceExpr="Combine Shipments" }

    { 158 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether items will never, automatically (Always), or optionally be reserved for this customer.;
                           RUS=Определяет, будут ли товары для этого клиента резервироваться автоматически (всегда), при необходимости или никогда.];
                SourceExpr=Reserve }

    { 123 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the customer accepts partial shipment of orders.;
                           RUS=Определяет, принимает ли клиент частичную поставку заказов.];
                SourceExpr="Shipping Advice";
                Importance=Promoted }

    { 145 ;2   ;Group     ;
                CaptionML=[ENU=Shipment Method;
                           RUS=Метод отгрузки];
                GroupType=Group }

    { 30  ;3   ;Field     ;
                CaptionML=[ENU=Code;
                           RUS=Код];
                ToolTipML=[ENU=Specifies which shipment method to use when you ship items to the customer.;
                           RUS=Определяет, какой метод поставки следует использовать при отправке товаров клиенту.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Shipment Method Code";
                Importance=Promoted }

    { 101 ;3   ;Field     ;
                CaptionML=[ENU=Agent;
                           RUS=Агент];
                ToolTipML=[ENU=Specifies which shipping company is used when you ship items to the customer.;
                           RUS=Определяет, какая транспортная компания должна использоваться при отправке товаров клиенту.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Code";
                Importance=Additional }

    { 131 ;3   ;Field     ;
                CaptionML=[ENU=Agent Service;
                           RUS=Услуга агента];
                ToolTipML=[ENU=Specifies the code for the shipping agent service to use for this customer.;
                           RUS=Определяет код услуги экспедитора, который следует использовать для этого клиента.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Agent Service Code";
                Importance=Additional }

    { 119 ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the shipping time of the order.;
                           RUS=Определяет время доставки заказа.];
                ApplicationArea=#Suite;
                SourceExpr="Shipping Time" }

    { 141 ;2   ;Field     ;
                DrillDown=No;
                ToolTipML=[ENU=Specifies a customizable calendar for shipment planning that holds the customer's working days and holidays.;
                           RUS=Определяет настраиваемый календарь для планирования доставки с указанием рабочих и выходных дней клиента.];
                SourceExpr="Base Calendar Code" }

    { 146 ;2   ;Field     ;
                Name=Customized Calendar;
                CaptionML=[ENU=Customized Calendar;
                           RUS=Настроенный календарь];
                ToolTipML=[ENU=Specifies that you have set up a customized version of a base calendar.;
                           RUS=Определяет, что создана настраиваемая версия базового календаря.];
                SourceExpr=CalendarMgmt.CustomizedCalendarExistText(CustomizedCalendar."Source Type"::Customer,"No.",'',"Base Calendar Code");
                Editable=FALSE;
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              TESTFIELD("Base Calendar Code");
                              CalendarMgmt.ShowCustomizedCalendar(CustomizedCalEntry."Source Type"::Customer,"No.",'',"Base Calendar Code");
                            END;
                             }

    { 1101495009;1;Group  ;
                CaptionML=[ENU=Specific;
                           RUS=Специфика];
                GroupType=Group }

    { 1101495010;2;Field  ;
                SourceExpr="CH Counterparty Type" }

    { 1101495011;2;Field  ;
                SourceExpr="Group No." }

    { 1101495012;2;Field  ;
                SourceExpr="Number of Employees" }

    { 1101495013;2;Field  ;
                SourceExpr="NOGA code" }

    { 1101495014;2;Field  ;
                SourceExpr="C553 Netting contract" }

    { 1101495015;2;Field  ;
                SourceExpr="Pledge Agreement" }

    { 124 ;1   ;Group     ;
                Name=Statistics;
                CaptionML=[ENU=Statistics;
                           RUS=Статистика];
                Visible=FoundationOnly;
                Editable=false;
                GroupType=Group }

    { 120 ;2   ;Group     ;
                Name=Balance;
                CaptionML=[ENU=Balance;
                           RUS=Сальдо];
                GroupType=Group }

    { 117 ;3   ;Field     ;
                Name=Balance (LCY)2;
                CaptionML=[ENU=Money Owed - Current;
                           RUS=Сумма задолженности - Текущая];
                ToolTipML=[ENU=Specifies the payment amount that the customer owes for completed sales. This value is also known as the customer's balance.;
                           RUS=Определяет сумму, которую должен заплатить клиент за завершенные продажи. Это значение также называется сальдо клиента.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance (LCY)" }

    { 116 ;3   ;Field     ;
                CaptionML=[ENU=Money Owed - Expected;
                           RUS=Сумма задолженности - Ожидаемая];
                ToolTipML=[ENU=Specifies the payment amount that the customer will owe when ongoing sales invoices and credit memos are completed.;
                           RUS=Определяет сумму оплаты, которую будет должен клиент после закрытия незавершенных кредит-нот и счетов продажи.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetMoneyOwedExpected;
                Importance=Additional;
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownMoneyOwedExpected("No.");
                            END;
                             }

    { 115 ;3   ;Field     ;
                Name=TotalMoneyOwed;
                CaptionML=[ENU=Money Owed - Total;
                           RUS=Сумма задолженности - Всего];
                ToolTipML=[ENU=Specifies the payment amount that the customer owes for completed sales plus sales that are still ongoing. The value is the sum of the values in the Money Owed - Current and Money Owed - Expected fields.;
                           RUS=Определяет сумму оплаты, которую должен клиент за завершенные и незавершенные продажи. Это значение представляет собой сумму полей "Сумма задолженности - Текущая" и "Сумма задолженности - Ожидаемая".];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Balance (LCY)" + GetMoneyOwedExpected;
                Style=Strong;
                StyleExpr=TRUE }

    { 111 ;3   ;Field     ;
                Name=CreditLimit;
                CaptionML=[ENU=Credit Limit;
                           RUS=Кредитный лимит];
                ToolTipML=[ENU=Specifies the maximum amount you allow the customer to exceed the payment balance before warnings are issued.;
                           RUS=Определяет максимальную сумму превышения платежного баланса для клиента, после достижения которой выписывается предупреждение.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Credit Limit (LCY)" }

    { 110 ;3   ;Field     ;
                ExtendedDatatype=Ratio;
                CaptionML=[ENU=Usage Of Credit Limit;
                           RUS=Использование кредитного лимита];
                ToolTipML=[ENU=Specifies how much of the customer's payment balance consists of credit.;
                           RUS=Определяет, какую часть платежного баланса клиента составляет кредит.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CalcCreditLimitLCYExpendedPct;
                Style=Attention;
                StyleExpr=BalanceExhausted }

    { 108 ;2   ;Group     ;
                CaptionML=[ENU=Payments;
                           RUS=Платежи];
                GroupType=Group }

    { 106 ;3   ;Field     ;
                Name=Balance Due;
                ToolTipML=[ENU=Specifies the sum of outstanding payments from the customer.;
                           RUS=Определяет сумму невыполненных платежей по клиенту.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CalcOverdueBalance;
                CaptionClass=FORMAT(STRSUBSTNO(OverduePaymentsMsg,FORMAT(WORKDATE)));
                OnDrillDown=VAR
                              DtldCustLedgEntry@1000 : Record 379;
                              CustLedgEntry@1001 : Record 21;
                            BEGIN
                              DtldCustLedgEntry.SETFILTER("Customer No.","No.");
                              COPYFILTER("Global Dimension 1 Filter",DtldCustLedgEntry."Initial Entry Global Dim. 1");
                              COPYFILTER("Global Dimension 2 Filter",DtldCustLedgEntry."Initial Entry Global Dim. 2");
                              COPYFILTER("Currency Filter",DtldCustLedgEntry."Currency Code");
                              CustLedgEntry.DrillDownOnOverdueEntries(DtldCustLedgEntry);
                            END;
                             }

    { 105 ;3   ;Field     ;
                CaptionML=[ENU=Payments This Year;
                           RUS=Платежи в этом году];
                ToolTipML=[ENU=Specifies the sum of payments received from the customer in the current fiscal year.;
                           RUS=Определяет сумму платежей, полученных от клиента в текущем финансовом году.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Payments (LCY)" }

    { 103 ;3   ;Field     ;
                CaptionML=[ENU=Average Collection Period (Days);
                           RUS=Средний срок погашения долга (дни)];
                ToolTipML=[ENU=Specifies how long the customer typically takes to pay invoices in the current fiscal year.;
                           RUS=Определяет среднее время, необходимое клиенту для оплаты счетов в текущем финансовом году.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:1;
                SourceExpr=CustomerMgt.AvgDaysToPay("No.");
                Importance=Additional }

    { 102 ;3   ;Field     ;
                Name=DaysPaidPastDueDate;
                CaptionML=[ENU=Average Late Payments (Days);
                           RUS=Средняя просрочка платежей (дни)];
                ToolTipML=[ENU=Specifies the average number of days the customer is late with payments.;
                           RUS=Определяет среднее число дней, на которое клиент задерживает платежи.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:1;
                SourceExpr=DaysPastDueDate;
                Importance=Additional;
                Style=Attention;
                StyleExpr=AttentionToPaidDay }

    { 100 ;2   ;Group     ;
                CaptionML=[ENU=Sales This Year;
                           RUS=Продажи в этом году];
                GroupType=Group }

    { 98  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your sales to the customer in the current fiscal year based on posted sales invoices. The figure in parenthesis Specifies the number of posted sales invoices.;
                           RUS=Определяет продажи клиенту в текущем финансовом году на основе учтенных счетов продажи. Значение в скобках определяет количество учтенных счетов продажи.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnPostedInvoices;
                CaptionClass=STRSUBSTNO(PostedInvoicesMsg,FORMAT(NoPostedInvoices));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnPostedInvoices("No.")
                            END;
                             }

    { 97  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your expected refunds to the customer in the current fiscal year based on posted sales credit memos. The figure in parenthesis shows the number of posted sales credit memos.;
                           RUS=Определяет ожидаемые возмещения клиенту в текущем финансовом году на основе учтенных кредит-нот продажи. Значение в скобках показывает количество учтенных кредит-нот продажи.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnCrMemo;
                CaptionClass=STRSUBSTNO(CreditMemosMsg,FORMAT(NoPostedCrMemos));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnPostedCrMemo("No.")
                            END;
                             }

    { 96  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your expected sales to the customer in the current fiscal year based on ongoing sales invoices. The figure in parenthesis shows the number of ongoing sales invoices.;
                           RUS=Определяет ожидаемые продажи клиенту в текущем финансовом году на основе незавершенных счетов продажи. Значение в скобках показывает количество незавершенных счетов продажи.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnOutstandingInvoices;
                CaptionClass=STRSUBSTNO(OutstandingInvoicesMsg,FORMAT(NoOutstandingInvoices));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnUnpostedInvoices("No.")
                            END;
                             }

    { 92  ;3   ;Field     ;
                ToolTipML=[ENU=Specifies your refunds to the customer in the current fiscal year based on ongoing sales credit memos. The figure in parenthesis shows the number of ongoing sales credit memos.;
                           RUS=Определяет возмещения клиенту в текущем финансовом году на основе незавершенных кредит-нот продажи. Значение в скобках показывает количество незавершенных кредит-нот продажи.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=GetAmountOnOutstandingCrMemos;
                CaptionClass=STRSUBSTNO(OutstandingCrMemosMsg,FORMAT(NoOutstandingCrMemos));
                OnDrillDown=BEGIN
                              CustomerMgt.DrillDownOnUnpostedCrMemos("No.")
                            END;
                             }

    { 89  ;3   ;Field     ;
                CaptionML=[ENU=Total Sales;
                           RUS=Общая продажа];
                ToolTipML=[ENU=Specifies your total sales turnover with the customer in the current fiscal year. It is calculated from amounts excluding VAT on all completed and open invoices and credit memos.;
                           RUS=Определяет общий оборот продаж клиенту в текущем финансовом году. Это значение вычисляется на основании сумм без НДС по всем завершенным и открытым счетам и кредит-нотам.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Totals;
                Style=Strong;
                StyleExpr=TRUE }

    { 88  ;3   ;Field     ;
                CaptionML=[ENU=Invoice Discounts;
                           RUS=Скидки по счету];
                ToolTipML=[ENU=Specifies the total of all invoice discounts that you have granted to the customer in the current fiscal year.;
                           RUS=Определяет общую сумму всех скидок по счетам, которые были предоставлены клиенту в текущем финансовом году.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=CustInvDiscAmountLCY }

    { 87  ;2   ;Part      ;
                Name=AgedAccReceivableChart;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page768;
                Visible=ShowCharts;
                PartType=Page }

    { 75  ;1   ;Part      ;
                Name=PriceAndLineDisc;
                CaptionML=[ENU=Special Prices & Discounts;
                           RUS=Специальные цены и скидки];
                ApplicationArea=#All;
                PagePartID=Page1345;
                Visible=FoundationOnly;
                PartType=Page }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 149 ;1   ;Part      ;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page785;
                Visible=NOT IsOfficeAddin;
                PartType=Page }

    { 135 ;1   ;Part      ;
                CaptionML=[ENU=Details;
                           RUS=Подробности];
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page1611;
                Visible=IsOfficeAddin;
                PartType=Page }

    { 134 ;1   ;Part      ;
                Name=AgedAccReceivableChart2;
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page768;
                Visible=IsOfficeAddin;
                PartType=Page }

    { 39  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page5360;
                Visible=CRMIsCoupledToRecord;
                PartType=Page }

    { 35  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Source Type=CONST(Customer),
                            Source No.=FIELD(No.);
                PagePartID=Page875;
                Visible=SocialListeningVisible;
                PartType=Page }

    { 27  ;1   ;Part      ;
                ApplicationArea=#All;
                SubPageLink=Source Type=CONST(Customer),
                            Source No.=FIELD(No.);
                PagePartID=Page876;
                Visible=SocialListeningSetupVisible;
                PartType=Page;
                UpdatePropagation=Both }

    { 1903720907;1;Part   ;
                Name=SalesHistSelltoFactBox;
                ApplicationArea=#Basic,#Suite;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9080;
                PartType=Page }

    { 1907234507;1;Part   ;
                Name=SalesHistBilltoFactBox;
                ApplicationArea=#All;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9081;
                Visible=FALSE;
                PartType=Page }

    { 1902018507;1;Part   ;
                Name=CustomerStatisticsFactBox;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9082;
                PartType=Page }

    { 1905532107;1;Part   ;
                SubPageLink=Table ID=CONST(18),
                            No.=FIELD(No.);
                PagePartID=Page9083;
                PartType=Page }

    { 1907829707;1;Part   ;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9085;
                Visible=FALSE;
                PartType=Page }

    { 1902613707;1;Part   ;
                SubPageLink=No.=FIELD(No.),
                            Currency Filter=FIELD(Currency Filter),
                            Date Filter=FIELD(Date Filter),
                            Global Dimension 1 Filter=FIELD(Global Dimension 1 Filter),
                            Global Dimension 2 Filter=FIELD(Global Dimension 2 Filter);
                PagePartID=Page9086;
                Visible=FALSE;
                PartType=Page }

    { 62  ;1   ;Part      ;
                Name=WorkflowStatus;
                ApplicationArea=#Suite;
                PagePartID=Page1528;
                Visible=ShowWorkflowStatus;
                Enabled=FALSE;
                Editable=FALSE;
                PartType=Page;
                ShowFilter=No }

    { 1900383207;1;Part   ;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      CustomizedCalEntry@1001 : Record 7603;
      CustomizedCalendar@1005 : Record 7602;
      Vend@1470000 : Record 23;
      CalendarMgmt@1002 : Codeunit 7600;
      ApprovalsMgmt@1009 : Codeunit 1535;
      CustomerMgt@1024 : Codeunit 1302;
      StyleTxt@1004 : Text;
      BlockedCustomer@1062 : Boolean;
      VendorNameVisible@19022888 : Boolean INDATASET;
      VendorBalanceVisible@19015713 : Boolean INDATASET;
      TotalBalanceVisible@19063333 : Boolean INDATASET;
      ContactEditable@19051436 : Boolean INDATASET;
      SocialListeningSetupVisible@1000 : Boolean INDATASET;
      SocialListeningVisible@1003 : Boolean INDATASET;
      ShowCharts@1040 : Boolean INDATASET;
      CRMIntegrationEnabled@1007 : Boolean;
      CRMIsCoupledToRecord@1006 : Boolean;
      OpenApprovalEntriesExistCurrUser@1008 : Boolean;
      OpenApprovalEntriesExist@1010 : Boolean;
      ShowWorkflowStatus@1011 : Boolean;
      NoFieldVisible@1014 : Boolean;
      BalanceExhausted@1032 : Boolean;
      AttentionToPaidDay@1035 : Boolean;
      DynamicEditable@1063 : Boolean;
      IsOfficeAddin@1065 : Boolean;
      NoPostedInvoices@1015 : Integer;
      NoPostedCrMemos@1018 : Integer;
      NoOutstandingInvoices@1017 : Integer;
      NoOutstandingCrMemos@1016 : Integer;
      Totals@1019 : Decimal;
      AmountOnPostedInvoices@1023 : Decimal;
      AmountOnPostedCrMemos@1022 : Decimal;
      AmountOnOutstandingInvoices@1021 : Decimal;
      AmountOnOutstandingCrMemos@1020 : Decimal;
      AdjmtCostLCY@1028 : Decimal;
      AdjCustProfit@1027 : Decimal;
      CustProfit@1026 : Decimal;
      AdjProfitPct@1025 : Decimal;
      CustInvDiscAmountLCY@1029 : Decimal;
      CustPaymentsLCY@1030 : Decimal;
      CustSalesLCY@1031 : Decimal;
      OverduePaymentsMsg@1033 : TextConst '@@@=Overdue Payments as of 27-02-2012;ENU=Overdue Payments as of %1;RUS=Просроченные платежи по данным на %1';
      DaysPastDueDate@1034 : Decimal;
      PostedInvoicesMsg@1036 : TextConst '@@@=Invoices (5);ENU=Posted Invoices (%1);RUS=Учтенные счета (%1)';
      CreditMemosMsg@1037 : TextConst '@@@=Credit Memos (3);ENU=Posted Credit Memos (%1);RUS=Учтенные кредит-ноты (%1)';
      OutstandingInvoicesMsg@1039 : TextConst '@@@=Ongoing Invoices (4);ENU=Ongoing Invoices (%1);RUS=Счета для обработки (%1)';
      OutstandingCrMemosMsg@1038 : TextConst '@@@=Ongoing Credit Memos (4);ENU=Ongoing Credit Memos (%1);RUS=Текущие кредит-ноты (%1)';
      ShowMapLbl@1066 : TextConst 'ENU=Show on Map;RUS=Показать на карте';
      FoundationOnly@1012 : Boolean;
      CanCancelApprovalForRecord@1013 : Boolean;
      EnabledApprovalWorkflowsExist@1041 : Boolean;
      NewMode@1044 : Boolean;
      EventFilter@1042 : Text;
      ICCounterparty@1101495000 : Code[20];
      Text50001@1101495002 : TextConst 'ENU=Not found Default Dimension %1;RUS=Не найдено стандартное измерение %1';
      Text50002@1101495001 : TextConst 'ENU=Do You want to delete document?;RUS=Вы хотите удалить шаблон документа?';
      ICCounterpartyEditable@1101495003 : Boolean INDATASET;
      g_recUserSetup@1101495004 : Record 91;
      Text50003@1101495005 : TextConst 'ENU=You have no permission to edit IC Code. Check User Setup, field %1.;RUS=У вас нет разрешения редактировать Код Группы Контрагента. Проверьте Пользователь Настройка, поле %1.';

    LOCAL PROCEDURE GetTotalSales@6() : Decimal;
    BEGIN
      NoPostedInvoices := 0;
      NoPostedCrMemos := 0;
      NoOutstandingInvoices := 0;
      NoOutstandingCrMemos := 0;
      Totals := 0;

      AmountOnPostedInvoices := CustomerMgt.CalcAmountsOnPostedInvoices("No.",NoPostedInvoices);
      AmountOnPostedCrMemos := CustomerMgt.CalcAmountsOnPostedCrMemos("No.",NoPostedCrMemos);

      AmountOnOutstandingInvoices := CustomerMgt.CalculateAmountsOnUnpostedInvoices("No.",NoOutstandingInvoices);
      AmountOnOutstandingCrMemos := CustomerMgt.CalculateAmountsOnUnpostedCrMemos("No.",NoOutstandingCrMemos);

      Totals := AmountOnPostedInvoices + AmountOnPostedCrMemos + AmountOnOutstandingInvoices + AmountOnOutstandingCrMemos;

      CustomerMgt.CalculateStatistic(
        Rec,
        AdjmtCostLCY,AdjCustProfit,AdjProfitPct,
        CustInvDiscAmountLCY,CustPaymentsLCY,CustSalesLCY,
        CustProfit);
      EXIT(Totals)
    END;

    LOCAL PROCEDURE GetAmountOnPostedInvoices@5() : Decimal;
    BEGIN
      EXIT(AmountOnPostedInvoices)
    END;

    LOCAL PROCEDURE GetAmountOnCrMemo@8() : Decimal;
    BEGIN
      EXIT(AmountOnPostedCrMemos)
    END;

    LOCAL PROCEDURE GetAmountOnOutstandingInvoices@9() : Decimal;
    BEGIN
      EXIT(AmountOnOutstandingInvoices)
    END;

    LOCAL PROCEDURE GetAmountOnOutstandingCrMemos@10() : Decimal;
    BEGIN
      EXIT(AmountOnOutstandingCrMemos)
    END;

    LOCAL PROCEDURE GetMoneyOwedExpected@11() : Decimal;
    BEGIN
      EXIT(CustomerMgt.CalculateAmountsWithVATOnUnpostedDocuments("No."))
    END;

    LOCAL PROCEDURE GetSalesPricesAndSalesLineDisc@24();
    BEGIN
      IF "No." <> CurrPage.PriceAndLineDisc.PAGE.GetLoadedCustNo THEN BEGIN
        CurrPage.PriceAndLineDisc.PAGE.LoadCustomer(Rec);
        CurrPage.PriceAndLineDisc.PAGE.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE ActivateFields@3();
    BEGIN
      SetSocialListeningFactboxVisibility;
      ContactEditable := "Primary Contact No." = '';
      VendorNameVisible := "Vendor No." <> '';
      VendorBalanceVisible := "Vendor No." <> '';
      TotalBalanceVisible := "Vendor No." <> '';

      CLEAR(Vend);
      IF Vend.GET("Vendor No.") THEN
        Vend.CALCFIELDS("Balance (LCY)");

      //NC MDB05.1 > DP
      ICCounterparty := GetICCode;
      //NC MDB05.1 < DP

      //NC NOS-26 > SPA
      ICCounterpartyEditable := "Relationship to the Group";
      //NC NOS-26 < SPA
    END;

    LOCAL PROCEDURE ContactOnAfterValidate@19013243();
    BEGIN
      ActivateFields;
    END;

    LOCAL PROCEDURE VendorNoOnAfterValidate@19009338();
    BEGIN
      ActivateFields;
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE SetSocialListeningFactboxVisibility@1();
    VAR
      SocialListeningMgt@1000 : Codeunit 871;
    BEGIN
      SocialListeningMgt.GetCustFactboxVisibility(Rec,SocialListeningSetupVisible,SocialListeningVisible);
    END;

    LOCAL PROCEDURE SetNoFieldVisible@13();
    VAR
      DocumentNoVisibility@1000 : Codeunit 1400;
    BEGIN
      NoFieldVisible := DocumentNoVisibility.CustomerNoIsVisible;
    END;

    LOCAL PROCEDURE SetCustomerNoVisibilityOnFactBoxes@12();
    BEGIN
      CurrPage.SalesHistSelltoFactBox.PAGE.SetCustomerNoVisibility(FALSE);
      CurrPage.SalesHistBilltoFactBox.PAGE.SetCustomerNoVisibility(FALSE);
      CurrPage.CustomerStatisticsFactBox.PAGE.SetCustomerNoVisibility(FALSE);
    END;

    PROCEDURE RunReport@2(ReportNumber@1000 : Integer;CustomerNumber@1002 : Code[20]);
    VAR
      Customer@1001 : Record 18;
    BEGIN
      Customer.SETRANGE("No.",CustomerNumber);
      REPORT.RUNMODAL(ReportNumber,TRUE,TRUE,Customer);
    END;

    LOCAL PROCEDURE CreateCustomerFromTemplate@27();
    VAR
      MiniCustomerTemplate@1001 : Record 1300;
      Customer@1000 : Record 18;
    BEGIN
      IF NewMode THEN BEGIN
        IF MiniCustomerTemplate.NewCustomerFromTemplate(Customer) THEN BEGIN
          COPY(Customer);
          CurrPage.UPDATE;
        END;
        NewMode := FALSE;
      END;
    END;

    PROCEDURE GetICCode@1000000000() : Code[20];
    VAR
      MovingDataSetup@1101495000 : Record 50064;
      ConsSetup@1101495001 : Record 50000;
      DimValue@1101495003 : Record 349;
      LinkedDim@1101495002 : Record 50016;
      ICCode@1101495004 : Code[20];
    BEGIN
      //NC MDB05.1 > DP
      ICCode := '';
      MovingDataSetup.GET;
      MovingDataSetup.TESTFIELD("Customer Dimension Code");
      ConsSetup.GET;
      ConsSetup.TESTFIELD("IC Dimension Code");

      //для консолидации через Значения Измерения
      IF DimValue.GET(MovingDataSetup."Customer Dimension Code","No.") THEN BEGIN
        LinkedDim.RESET;
        LinkedDim.SETRANGE("Dimension Code",DimValue."Dimension Code");
        LinkedDim.SETRANGE("Dimension Value",DimValue.Code);
        LinkedDim.SETRANGE("Linked Dimension Code",ConsSetup."IC Dimension Code");
        IF LinkedDim.FINDFIRST THEN
          ICCode := LinkedDim."Linked Dimension Value";
      END;
      EXIT(ICCode);
      //NC MDB05.1 < DP
    END;

    PROCEDURE SetICCode@1000000001();
    VAR
      MovingDataSetup@1101495003 : Record 50064;
      ConsSetup@1101495002 : Record 50000;
      DimValue@1101495001 : Record 349;
      LinkedDim@1101495000 : Record 50016;
      DefDim@1101495004 : Record 352;
    BEGIN
      //NC MDB05.1 > DP
      MovingDataSetup.GET;
      MovingDataSetup.TESTFIELD("Customer Dimension Code");
      ConsSetup.GET;
      ConsSetup.TESTFIELD("IC Dimension Code");
      IF ICCounterparty <> '' THEN BEGIN
        //для оффшорных компаний через Станд. Измерения
        DefDim.RESET;
        DefDim.SETRANGE("Table ID",18);
        DefDim.SETRANGE("No.","No.");
        DefDim.SETRANGE("Dimension Code",MovingDataSetup."Customer Dimension Code");
        IF DefDim.FINDFIRST THEN BEGIN
          LinkedDim.RESET;
          LinkedDim.SETRANGE("Dimension Code",DefDim."Dimension Code");
          LinkedDim.SETRANGE("Dimension Value",DefDim."Dimension Value Code");
          LinkedDim.SETRANGE("Linked Dimension Code",ConsSetup."IC Dimension Code");
          IF NOT LinkedDim.FINDFIRST THEN BEGIN
            LinkedDim.INIT;
            LinkedDim."Dimension Code" :=DefDim."Dimension Code";
            LinkedDim."Dimension Value" := DefDim."Dimension Value Code";
            LinkedDim."Linked Dimension Code" :=ConsSetup."IC Dimension Code";
            LinkedDim."Linked Dimension Value" :=ICCounterparty;
            LinkedDim.INSERT;
          END ELSE BEGIN
            LinkedDim."Linked Dimension Value" :=ICCounterparty;
            LinkedDim.MODIFY;
          END;
        END ELSE
          ERROR(Text50001,MovingDataSetup."Customer Dimension Code");
      END ELSE BEGIN
        //для оффшорных компаний через Станд. Измерения
        DefDim.RESET;
        DefDim.SETRANGE("Table ID",18);
        DefDim.SETRANGE("No.","No.");
        DefDim.SETRANGE("Dimension Code",MovingDataSetup."Customer Dimension Code");
        IF DefDim.FINDFIRST THEN BEGIN
          LinkedDim.RESET;
          LinkedDim.SETRANGE("Dimension Code",DefDim."Dimension Code");
          LinkedDim.SETRANGE("Dimension Value",DefDim."Dimension Value Code");
          LinkedDim.SETRANGE("Linked Dimension Code",ConsSetup."IC Dimension Code");
          IF LinkedDim.FINDFIRST THEN
            LinkedDim.DELETE;
        END ELSE
          ERROR(Text50001,MovingDataSetup."Customer Dimension Code");
      END;
      //NC MDB05.1 < DP
    END;

    BEGIN
    {
      NC MDB05 GM Add to menu Function, Communication Fields
      NC MDB05 GM Запрет на изменение полей, для которых установлено соответствие
      NC MDB05 GM Добавлен пункт меню Клиент, Кредитный Рейтинг Клиента
      NC TR177 DP Функции установки и просмотра статуса блокировки
      NC TR092 DP Функции добавления/удаления шаблонов документов
      NC MTD002 AIG Добавлен пункт по созданию карточки поставщика.
      NC NCS-660 RD вынесено поле "Related Counterparty Type Code"
      NC S1883 PCH Добавлено поле Segment Code, пункт меню "Change Segment"
      NC S1881 SPA Новая вкладка "Specific"
                   Выведены поля "CH Counterparty Code", "Group No.", "Number of Employees"
      NC NCS-1881 PCH Добавлено поле NOGA Code
      NC NCS-2096 AAP Добавлено поле "Pledge Agreement"
      NC NCS-2247 AAP Добавлено поле "C553 Netting contract"
      TDRANCS-2324 added field CRM ID on Tab Communication
      TDRANCS-2308 added field Resident/Non-resident on tab General
      BLD001 - NAVW15.00.01,LIQEM5.00,NAVRU5.00.01.02,TR177,S-660,1856,1883,1881,2096
      TDRANCS-2273 Modified Relationship to the Group - OnValidate(),ICCounterparty - OnValidate()
      -------------------------------------------------
      NC NOS-26 SPA Перенос кода на новую функциональность
            Требуется доработка Actions!!!
    }
    END.
  }
}

