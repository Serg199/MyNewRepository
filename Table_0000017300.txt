OBJECT Table 17300 Tax Difference
{
  OBJECT-PROPERTIES
  {
    Date=18.12.13;
    Time=12:00:00;
    Version List=NAVRU7.10;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Tax Difference;
               RUS=Налоговая разница];
    LookupPageID=Page17300;
  }
  FIELDS
  {
    { 1   ;   ;Code                ;Code10        ;CaptionML=[ENU=Code;
                                                              RUS=Код];
                                                   NotBlank=Yes }
    { 2   ;   ;Description         ;Text80        ;CaptionML=[ENU=Description;
                                                              RUS=Описание] }
    { 5   ;   ;Category            ;Option        ;CaptionML=[ENU=Category;
                                                              RUS=Категория];
                                                   OptionCaptionML=[ENU=Expense,Income;
                                                                    RUS=Расход,Доход];
                                                   OptionString=Expense,Income }
    { 6   ;   ;Type                ;Option        ;CaptionML=[ENU=Type;
                                                              RUS=Тип];
                                                   OptionCaptionML=[ENU=Constant,Temporary;
                                                                    RUS=Постоянная,Временная];
                                                   OptionString=Constant,Temporary }
    { 7   ;   ;Norm Jurisdiction Code;Code10      ;TableRelation="Tax Register Norm Jurisdiction".Code;
                                                   CaptionML=[ENU=Norm Jurisdiction Code;
                                                              RUS=Код нормы юрисдикции] }
    { 8   ;   ;Norm Code           ;Code10        ;TableRelation="Tax Register Norm Group".Code WHERE (Norm Jurisdiction Code=FIELD(Norm Jurisdiction Code));
                                                   CaptionML=[ENU=Norm Code;
                                                              RUS=Код нормы] }
    { 9   ;   ;Posting Group       ;Code10        ;TableRelation="Tax Diff. Posting Group";
                                                   CaptionML=[ENU=Posting Group;
                                                              RUS=Учетная группа] }
    { 10  ;   ;Tax Period Limited  ;Option        ;CaptionML=[ENU=Tax Period Limited;
                                                              RUS=Налог. период ограничен];
                                                   OptionCaptionML=[ENU=" ,Year";
                                                                    RUS=" ,Год"];
                                                   OptionString=[ ,Year] }
    { 11  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[ENU=Date Filter;
                                                              RUS=Фильтр по дате] }
    { 12  ;   ;Tax Amount          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Tax Diff. Ledger Entry"."Tax Amount" WHERE (Tax Diff. Code=FIELD(Code),
                                                                                                                Posting Date=FIELD(Date Filter)));
                                                   CaptionML=[ENU=Tax Amount;
                                                              RUS=Сумма налога];
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 13  ;   ;Calculation Mode    ;Option        ;CaptionML=[ENU=Calculation Mode;
                                                              RUS=Режим расчета];
                                                   OptionCaptionML=[ENU=" ,Balance";
                                                                    RUS=" ,Накопительная"];
                                                   OptionString=[ ,Balance] }
    { 14  ;   ;Calc. Norm Jurisdiction Code;Code10;TableRelation="Tax Register Norm Jurisdiction".Code;
                                                   CaptionML=[ENU=Calc. Norm Jurisdiction Code;
                                                              RUS=Код нормы юрисдикции расчета] }
    { 15  ;   ;Calc. Norm Code     ;Code10        ;TableRelation="Tax Register Norm Group".Code WHERE (Norm Jurisdiction Code=FIELD(Calc. Norm Jurisdiction Code));
                                                   OnValidate=BEGIN
                                                                IF "Calc. Norm Code" <> '' THEN BEGIN
                                                                  TaxDiff.RESET;
                                                                  TaxDiff.SETRANGE("Calc. Norm Jurisdiction Code","Calc. Norm Jurisdiction Code");
                                                                  TaxDiff.SETRANGE("Calc. Norm Code","Calc. Norm Code");
                                                                  TaxDiff.SETFILTER(Code,'<>%1',Code);
                                                                  IF TaxDiff.FINDFIRST THEN
                                                                    ERROR(Text1001,
                                                                      "Calc. Norm Jurisdiction Code","Calc. Norm Code",TaxDiff.Code);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Calc. Norm Code;
                                                              RUS=Код нормы расчета] }
    { 16  ;   ;Source Code Mandatory;Boolean      ;CaptionML=[ENU=Source Code Mandatory;
                                                              RUS=Код источника обязателен] }
    { 17  ;   ;Depreciation Bonus  ;Boolean       ;OnValidate=BEGIN
                                                                TaxDiffLedgerEntry.SETCURRENTKEY("Tax Diff. Code");
                                                                TaxDiffLedgerEntry.SETRANGE("Tax Diff. Code",Code);
                                                                IF NOT TaxDiffLedgerEntry.ISEMPTY THEN
                                                                  ERROR(Text1002);
                                                              END;

                                                   CaptionML=[ENU=Depreciation Bonus;
                                                              RUS=Амортизационная премия] }
  }
  KEYS
  {
    {    ;Code                                    ;Clustered=Yes }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;Code,Description                         }
  }
  CODE
  {
    VAR
      TaxDiff@1220000 : Record 17300;
      Text1001@1220001 : TextConst '@@@="%1 = Jurisdiction Code, %2 = Norm Code";ENU=Norm %1 %2 already used in tax difference %3.;RUS=Норма %1 %2 уже используется в налоговой разнице %3.';
      TaxDiffLedgerEntry@1210000 : Record 17306;
      Text1002@1210001 : TextConst 'ENU=You cannot change Depreciation Bonus because there is at least one ledger entry for this tax difference.;RUS=Нельзя изменить амортизационную премию, поскольку по данной налоговой разнице имеется не менее одной операции книги.';

    BEGIN
    END.
  }
}

