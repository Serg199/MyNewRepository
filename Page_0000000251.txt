OBJECT Page 251 General Journal Batches
{
  OBJECT-PROPERTIES
  {
    Date=17.04.17;
    Time=14:02:57;
    Modified=Yes;
    Version List=NAVW110.00,NOS-26;
  }
  PROPERTIES
  {
    CaptionML=[ENU=General Journal Batches;
               RUS=Разделы финансового журнала];
    SourceTable=Table232;
    DataCaptionExpr=DataCaption;
    PageType=List;
    OnOpenPage=BEGIN
                 GenJnlManagement.OpenJnlBatch(Rec);
                 ShowAllowPaymentExportForPaymentTemplate;
               END;

    OnNewRecord=BEGIN
                  SetupNewBatch;
                END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 29      ;1   ;Action    ;
                      Name=EditJournal;
                      ShortCutKey=Return;
                      CaptionML=[ENU=Edit Journal;
                                 RUS=Изменение журнала];
                      ToolTipML=[ENU=Edit the general journal.;
                                 RUS=Изменение финансового журнала.];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=OpenJournal;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 GenJnlManagement.TemplateSelectionFromBatch(Rec);
                               END;
                                }
      { 15      ;1   ;ActionGroup;
                      CaptionML=[ENU=P&osting;
                                 RUS=У&чет];
                      Image=Post }
      { 16      ;2   ;Action    ;
                      Name=TestReport;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Test Report;
                                 RUS=Тестовый отчет];
                      ToolTipML=[ENU=View a test report so that you can find and correct any errors before you perform the actual posting of the journal or document.;
                                 RUS=Просмотр тестового отчета, чтобы можно было найти и исправить все ошибки перед учетом журнала или документа.];
                      ApplicationArea=#Basic,#Suite;
                      Image=TestReport;
                      OnAction=BEGIN
                                 ReportPrint.PrintGenJnlBatch(Rec);
                               END;
                                }
      { 17      ;2   ;Action    ;
                      ShortCutKey=F9;
                      CaptionML=[ENU=P&ost;
                                 RUS=У&чет];
                      ToolTipML=[ENU=Finalize the document or journal by posting the amounts and quantities to the related accounts in your company books.;
                                 RUS=Завершение подготовки документа или журнала путем учета сумм и количеств на соответствующих счетах в книгах организации.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Codeunit 233;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostOrder;
                      PromotedCategory=Process }
      { 18      ;2   ;Action    ;
                      ShortCutKey=Shift+F9;
                      CaptionML=[ENU=Post and &Print;
                                 RUS=Учет и &печать];
                      ToolTipML=[ENU=Finalize and prepare to print the document or journal. The values and quantities are posted to the related accounts. A report request window where you can specify what to include on the print-out.;
                                 RUS=Завершение подготовки документа или журнала и его подготовка к печати. Значения и количества учитываются на соответствующих счетах. В окне запроса отчета можно указать, какая информация должна выводиться на печать.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Codeunit 234;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PostPrint;
                      PromotedCategory=Process }
      { 26      ;2   ;Action    ;
                      Name=MarkedOnOff;
                      CaptionML=[ENU=Marked On/Off;
                                 RUS=Отмеченные вкл./выкл.];
                      ToolTipML=[ENU=View all journal batches or only marked journal batches. A journal batch is marked if an attempt to post the general journal fails.;
                                 RUS=Просмотр всех разделов журнала или только отмеченных разделов журнала. Раздел журнала отмечается в случае сбоя попытки учета финансового журнала.];
                      ApplicationArea=#Basic,#Suite;
                      Image=Change;
                      OnAction=BEGIN
                                 MARKEDONLY(NOT MARKEDONLY);
                                 CurrPage.UPDATE(FALSE);
                               END;
                                }
      { 8       ;1   ;ActionGroup;
                      CaptionML=[ENU=Periodic Activities;
                                 RUS=Периодические операции] }
      { 7       ;2   ;Action    ;
                      CaptionML=[ENU=Recurring General Journal;
                                 RUS=Типовой финансовый журнал];
                      ToolTipML=[ENU=Define how to post transactions that recur with few or no changes to general ledger, bank, customer, vendor, and fixed assets accounts.;
                                 RUS=Определение порядка учета транзакций, повторяющихся с небольшими изменениями или вообще без изменения счетов главной книги, банка, клиентов, поставщиков и основных средств.];
                      ApplicationArea=#Suite;
                      RunObject=Page 283;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Journal;
                      PromotedCategory=Process;
                      PromotedOnly=Yes }
      { 9       ;2   ;Action    ;
                      CaptionML=[ENU=G/L Register;
                                 RUS=Регистр ГК];
                      ToolTipML=[ENU=View posted G/L entries.;
                                 RUS=Просмотр учтенных операций ГК.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Page 116;
                      Image=GLRegisters }
      { 22      ;    ;ActionContainer;
                      ActionContainerType=Reports }
      { 20      ;1   ;Action    ;
                      CaptionML=[ENU=Detail Trial Balance;
                                 RUS=Подробный пробный баланс];
                      ToolTipML=[ENU=View detail general ledger account balances and activities.;
                                 RUS=Просмотр сведений о сальдо и действиях по счету главной книги.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Report 4;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      PromotedOnly=Yes }
      { 14      ;1   ;Action    ;
                      CaptionML=[ENU=Trial Balance;
                                 RUS=Пробный баланс];
                      ToolTipML=[ENU=View general ledger account balances and activities.;
                                 RUS=Просмотр сальдо и действий по счету главной книги.];
                      ApplicationArea=#Suite;
                      RunObject=Report 6;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      PromotedOnly=Yes }
      { 12      ;1   ;Action    ;
                      CaptionML=[ENU=Trial Balance by Period;
                                 RUS=Пробный баланс по периодам];
                      ToolTipML=[ENU=View general ledger account balances and activities within a selected period.;
                                 RUS=Просмотр сальдо и действий по счету главной книги за выбранный период.];
                      ApplicationArea=#Basic,#Suite;
                      RunObject=Report 38;
                      Image=Report;
                      PromotedCategory=Report }
      { 10      ;1   ;Action    ;
                      CaptionML=[ENU=G/L Register;
                                 RUS=Регистр ГК];
                      ToolTipML=[ENU=View posted G/L entries.;
                                 RUS=Просмотр учтенных операций ГК.];
                      ApplicationArea=#Suite;
                      RunObject=Report 3;
                      Image=GLRegisters }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the journal you are creating.;
                           RUS=Определяет имя создаваемого журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Name }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a brief description of the journal batch you are creating.;
                           RUS=Определяет краткое описание создаваемого раздела журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description }

    { 11  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the value you have selected in the Bal. Account Type field on the journal template. You may change this value.;
                           RUS=Определяет значение, выбранное в поле "Тип баланс. счета" шаблона журнала. Это значение можно изменять.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bal. Account Type" }

    { 13  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a copy of the Bal. Account No. field, or the balancing account number for this general journal batch.;
                           RUS=Определяет копию поля "Номер баланс. счета" или номер балансирующего счета для этого раздела финансового журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Bal. Account No." }

    { 19  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign document numbers to journal lines in this journal batch.;
                           RUS=Определяет код серии номеров, которая будет использоваться для присвоения номеров документов строкам журнала в этом разделе журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="No. Series" }

    { 21  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for the number series that will be used to assign document numbers to ledger entries that are posted from this journal batch.;
                           RUS=Определяет код серии номеров, которая будет использоваться для присвоения номеров документов операциям ГК, учтенным из этого раздела журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting No. Series" }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the reason code that is linked to the general journal template.;
                           RUS=Определяет код причины, связанный с шаблоном финансового журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Reason Code" }

    { 25  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether the program to calculate VAT for accounts and balancing accounts on the journal line of the selected journal batch.;
                           RUS=Определяет, будет ли программа вычислять НДС для счетов и балансирующих счетов в строке выбранного раздела журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Copy VAT Setup to Jnl. Lines" }

    { 27  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies whether to allow the manual adjustment of VAT amounts in journal templates.;
                           RUS=Определяет, следует ли разрешать ручную корректировку сумм НДС в шаблонах журналов.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow VAT Difference" }

    { 3   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if you can export bank payment files from payment journal lines using this general journal batch.;
                           RUS=Определяет возможность экспорта файлов банковских платежей из строк журнала платежей с использованием этого раздела финансового журнала.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Allow Payment Export";
                Visible=IsPaymentTemplate }

    { 23  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the Amount field on journal lines for the same document number is automatically prefilled with the value that is required to balance the document.;
                           RUS=Указывает, что в поле "Сумма" для строк журнала для документа с тем же номером автоматически подставляется значение, необходимое для балансировки документа.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Suggest Balancing Amount" }

    { 5   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the format of the bank statement file that can be imported into this general journal batch.;
                           RUS=Определяет формат файла банковской выписки, который можно импортировать в этот раздел финансового журнала.];
                SourceExpr="Bank Statement Import Format";
                Visible=FALSE }

    { 1101495000;2;Field  ;
                SourceExpr="Reason Code Required" }

    { 1101495001;2;Field  ;
                SourceExpr="FX Batch" }

    { 1101495002;2;Field  ;
                SourceExpr="Check Printed" }

    { 1101495003;2;Field  ;
                SourceExpr="Not Consolidate" }

    { 1101495004;2;Field  ;
                SourceExpr="Adv. Statement Batch";
                Visible=FALSE }

    { 1101495005;2;Field  ;
                SourceExpr="Reversing Amount Validate" }

    { 1101495006;2;Field  ;
                SourceExpr="Batch Type" }

    { 1101495007;2;Field  ;
                SourceExpr="FI Portfolio" }

    { 1101495008;2;Field  ;
                SourceExpr="FI Posting Book" }

    { 1101495009;2;Field  ;
                SourceExpr="Dimension Filter Code" }

    { 1101495010;2;Field  ;
                SourceExpr="Bank Payment Type" }

    { 1101495011;2;Field  ;
                SourceExpr="Check Appl. ID Nos." }

    { 1900000007;0;Container;
                ContainerType=FactBoxArea }

    { 1900383207;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1905767507;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      ReportPrint@1000 : Codeunit 228;
      GenJnlManagement@1003 : Codeunit 230;
      IsPaymentTemplate@1001 : Boolean;

    LOCAL PROCEDURE DataCaption@1() : Text[250];
    VAR
      GenJnlTemplate@1000 : Record 80;
    BEGIN
      IF NOT CurrPage.LOOKUPMODE THEN
        IF GETFILTER("Journal Template Name") <> '' THEN
          IF GETRANGEMIN("Journal Template Name") = GETRANGEMAX("Journal Template Name") THEN
            IF GenJnlTemplate.GET(GETRANGEMIN("Journal Template Name")) THEN
              EXIT(GenJnlTemplate.Name + ' ' + GenJnlTemplate.Description);
    END;

    LOCAL PROCEDURE ShowAllowPaymentExportForPaymentTemplate@2();
    VAR
      GenJournalTemplate@1000 : Record 80;
    BEGIN
      IF GenJournalTemplate.GET("Journal Template Name") THEN
        IsPaymentTemplate := GenJournalTemplate.Type = GenJournalTemplate.Type::Payments;
    END;

    BEGIN
    {
      NC MP 26.03.07 Новое поле Reason Code Reqired
      NC PIF001 Выведены на форму новые поля
      NC MTF02 AKU Учет ФИ. Вынесены поля "FI Portfolio", "FI Posting Book"
      NC MNET07 DP Выведено поле "Reversing Amount Validate"
      NC NCS-1108 DP Выведено поле "Bank Payment Type","Check Appl. ID Nos."
      NC NCS-1108.5 DP Выведено поле "Check Printed"
    }
    END.
  }
}

