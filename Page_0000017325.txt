OBJECT Page 17325 Tax Calc. Entries
{
  OBJECT-PROPERTIES
  {
    Date=25.10.16;
    Time=12:00:00;
    Version List=NAVRU10.00;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Tax Calc. Entries;
               RUS=Операции налогового расчета];
    InsertAllowed=No;
    SourceTable=Table17315;
    DataCaptionExpr=FormTitle();
    SourceTableView=SORTING(Section Code);
    PageType=List;
    OnOpenPage=BEGIN
                 COPYFILTER("Date Filter",Calendar."Period End");
                 COPYFILTER("Date Filter","Posting Date");
                 TaxCalcMgt.SetPeriodAmountType(Calendar,DateFilterText,PeriodType,AmountType);
                 Calendar.RESET;
               END;

    OnFindRecord=BEGIN
                   IF DateFilterText <> GETFILTER("Date Filter") THEN
                     ShowNewData;

                   EXIT(FIND(Which));
                 END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 31      ;1   ;Action    ;
                      CaptionML=[ENU=Previous Period;
                                 RUS=Предыдущий период];
                      ToolTipML=[ENU=Previous Period;
                                 RUS=Предыдущий период];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=PreviousRecord;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 FindPeriod('<=');
                               END;
                                }
      { 32      ;1   ;Action    ;
                      CaptionML=[ENU=Next Period;
                                 RUS=Следующий период];
                      ToolTipML=[ENU=Next Period;
                                 RUS=Следующий период];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=NextRecord;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 FindPeriod('>=');
                               END;
                                }
      { 34      ;1   ;Action    ;
                      CaptionML=[ENU=Navigate;
                                 RUS=Навигатор];
                      ApplicationArea=#Basic,#Suite;
                      Promoted=Yes;
                      Image=Navigate;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 Navigating;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                Editable=FALSE;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the posting date associated with the tax calculation entry.;
                           RUS=Определяет дату учета, связанную с операцией налогового расчета.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Posting Date" }

    { 37  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the document type associated with the tax calculation entry.;
                           RUS=Определяет тип документа, связанный с операцией налогового расчета.];
                SourceExpr="Document Type";
                Visible=FALSE }

    { 39  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the document number associated with the tax calculation entry.;
                           RUS=Определяет номер документа, связанный с операцией налогового расчета.];
                SourceExpr="Document No.";
                Visible=FALSE }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the term entry line code description associated with the tax calculation entry.;
                           RUS=Определяет описание кода строки операции термина, связанное с операцией налогового расчета.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Description }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the amount associated with the tax calculation entry.;
                           RUS=Определяет сумму, связанную с операцией налогового расчета.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=Amount }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the debit account number associated with the tax calculation entry.;
                           RUS=Определяет номер дебетового счета, связанный с операцией налогового расчета.];
                SourceExpr="Debit Account No.";
                Visible=FALSE }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the credit account number associated with the tax calculation entry.;
                           RUS=Определяет номер кредитного счета, связанный с операцией налогового расчета.];
                SourceExpr="Credit Account No.";
                Visible=FALSE }

    { 35  ;2   ;Field     ;
                CaptionML=[ENU=Debit Account Name;
                           RUS=Название дебетового счета];
                SourceExpr=DebitAccountName;
                Visible=FALSE }

    { 16  ;2   ;Field     ;
                CaptionML=[ENU=Credit Account Name;
                           RUS=Название кредитового счета];
                SourceExpr=CreditAccountName;
                Visible=FALSE }

    { 41  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the tax calculation entry is a correction.;
                           RUS=Определяет, является ли данная операция налогового расчета коррекцией.];
                SourceExpr=Correction;
                Visible=FALSE }

    { 43  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the source type associated with the tax calculation entry.;
                           RUS=Определяет тип источника, связанный с операцией налогового расчета.];
                SourceExpr="Source Type";
                Visible=FALSE }

    { 45  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the source number associated with the tax calculation entry.;
                           RUS=Определяет номер источника, связанный с операцией налогового расчета.];
                SourceExpr="Source No.";
                Visible=FALSE }

    { 47  ;2   ;Field     ;
                CaptionML=[ENU=Source Name;
                           RUS=Название источника];
                SourceExpr=SourceName;
                Visible=FALSE }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the ledger entry number associated with the tax calculation entry.;
                           RUS=Определяет номер операции главной книги, связанный с операцией налогового расчета.];
                SourceExpr="Ledger Entry No.";
                Visible=FALSE }

    { 56  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the dimension 1 value code associated with the tax calculation entry.;
                           RUS=Определяет код значения измерения 1, связанный с операцией налогового расчета.];
                SourceExpr="Dimension 1 Value Code";
                Visible=FALSE }

    { 54  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the dimension 2 value code associated with the tax calculation entry.;
                           RUS=Определяет код значения измерения 2, связанный с операцией налогового расчета.];
                SourceExpr="Dimension 2 Value Code";
                Visible=FALSE }

    { 52  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the dimension 3 value code associated with the tax calculation entry.;
                           RUS=Определяет код значения измерения 3, связанный с операцией налогового расчета.];
                SourceExpr="Dimension 3 Value Code";
                Visible=FALSE }

    { 50  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the dimension 4 value code associated with the tax calculation entry.;
                           RUS=Определяет код значения измерения 4, связанный с операцией налогового расчета.];
                SourceExpr="Dimension 4 Value Code";
                Visible=FALSE }

    { 1000000000;2;Field  ;
                DrillDown=No;
                ToolTipML=[ENU=Specifies the tax factor associated with the tax calculation entry.;
                           RUS=Определяет ставку налога, связанную с операцией налогового расчета.];
                SourceExpr="Tax Factor";
                Visible=FALSE }

    { 1000000002;2;Field  ;
                DrillDown=No;
                ToolTipML=[ENU=Specifies the tax amount associated with the tax calculation entry.;
                           RUS=Определяет сумму налога, связанную с операцией налогового расчета.];
                SourceExpr="Tax Amount";
                Visible=FALSE }

    { 28  ;1   ;Field     ;
                ToolTipML=[ENU=Month;
                           RUS=Месяц];
                OptionCaptionML=[ENU=,,Month,Quarter,Year;
                                 RUS=,,Месяц,Квартал,Год];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=PeriodType;
                OnValidate=BEGIN
                             IF PeriodType = PeriodType::Year THEN
                               YearPeriodTypeOnValidate;
                             IF PeriodType = PeriodType::Quarter THEN
                               QuarterPeriodTypeOnValidate;
                             IF PeriodType = PeriodType::Month THEN
                               MonthPeriodTypeOnValidate;
                           END;
                            }

    { 101 ;1   ;Field     ;
                ToolTipML=[ENU=Current Period;
                           RUS=Текущий период];
                OptionCaptionML=[ENU=Current Period,Tax Period;
                                 RUS=Текущий период,Налоговый период];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=AmountType;
                OnValidate=BEGIN
                             IF AmountType = AmountType::"Tax Period" THEN
                               TaxPeriodAmountTypeOnValidate;
                             IF AmountType = AmountType::"Current Period" THEN
                               CurrentPeriodAmountTypeOnValid;
                           END;
                            }

  }
  CODE
  {
    VAR
      Calendar@1000 : Record 2000000007;
      TaxCalcMgt@1001 : Codeunit 17303;
      DateFilterText@1002 : Text;
      PeriodType@1003 : ',,Month,Quarter,Year';
      AmountType@1004 : 'Current Period,Tax Period';

    PROCEDURE ShowNewData@1();
    BEGIN
      FindPeriod('');
      DateFilterText := GETFILTER("Date Filter");

      SETFILTER("Posting Date",DateFilterText);
      SETFILTER("Date Filter",DateFilterText);
    END;

    LOCAL PROCEDURE FindPeriod@2(SearchText@1000 : Code[10]);
    VAR
      Calendar@1001 : Record 2000000007;
    BEGIN
      IF GETFILTER("Date Filter") <> '' THEN BEGIN
        Calendar."Period End" := GETRANGEMAX("Date Filter");
        IF NOT TaxCalcMgt.FindDate('',Calendar,PeriodType,AmountType) THEN
          TaxCalcMgt.FindDate('',Calendar,PeriodType::Month,AmountType);
      END;
      TaxCalcMgt.FindDate(SearchText,Calendar,PeriodType,AmountType);

      SETFILTER("Date Filter",'%1..%2',Calendar."Period Start",Calendar."Period End");
    END;

    LOCAL PROCEDURE MonthPeriodTypeOnPush@19047374();
    BEGIN
      FindPeriod('');
    END;

    LOCAL PROCEDURE QuarterPeriodTypeOnPush@19018850();
    BEGIN
      FindPeriod('');
    END;

    LOCAL PROCEDURE YearPeriodTypeOnPush@19051042();
    BEGIN
      FindPeriod('');
    END;

    LOCAL PROCEDURE TaxPeriodAmountTypeOnPush@19068511();
    BEGIN
      FindPeriod('');
    END;

    LOCAL PROCEDURE CurrentPeriodAmountTypeOnPush@19039366();
    BEGIN
      FindPeriod('');
    END;

    LOCAL PROCEDURE MonthPeriodTypeOnValidate@19021027();
    BEGIN
      MonthPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE QuarterPeriodTypeOnValidate@19015346();
    BEGIN
      QuarterPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE YearPeriodTypeOnValidate@19064743();
    BEGIN
      YearPeriodTypeOnPush;
    END;

    LOCAL PROCEDURE CurrentPeriodAmountTypeOnValid@19036813();
    BEGIN
      CurrentPeriodAmountTypeOnPush;
    END;

    LOCAL PROCEDURE TaxPeriodAmountTypeOnValidate@19037601();
    BEGIN
      TaxPeriodAmountTypeOnPush;
    END;

    BEGIN
    END.
  }
}

